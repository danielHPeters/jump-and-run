{"version":3,"names":[],"mappings":"","sources":["editor.bundle.js.map"],"sourcesContent":["{\"version\":3,\"sources\":[\"webpack:///webpack/bootstrap 90a2a6829fa9a3658b8c\",\"webpack:///./src/editor/client/app.js\",\"webpack:///./src/editor/client/application/Editor.js\",\"webpack:///./src/lib/Ajax.js\"],\"names\":[\"document\",\"addEventListener\",\"editor\",\"gameObjects\",\"boxes\",\"getElementsByClassName\",\"i\",\"length\",\"allowDrop\",\"drop\",\"setItem\",\"forEach\",\"getElementById\",\"object\",\"drag\",\"toggleSelectItem\",\"submitLevel\",\"Editor\",\"objectsCount\",\"activeItem\",\"editorGrid\",\"messageBox\",\"submitUrl\",\"event\",\"preventDefault\",\"dataTransfer\",\"setData\",\"target\",\"id\",\"data\",\"getData\",\"originalNode\",\"clonedNode\",\"cloneNode\",\"getAttribute\",\"classList\",\"add\",\"appendChild\",\"querySelectorAll\",\"remove\",\"node\",\"currentTarget\",\"hasChildNodes\",\"console\",\"log\",\"firstChild\",\"removeChild\",\"areas\",\"exits\",\"left\",\"right\",\"top\",\"bottom\",\"blocks\",\"children\",\"childNodes\",\"childChildNodes\",\"j\",\"contains\",\"push\",\"type\",\"solid\",\"message\",\"createTextNode\",\"createAndSendRequest\",\"generateLevel\",\"displayMessage\",\"Ajax\",\"url\",\"callback\",\"xHttp\",\"XMLHttpRequest\",\"onreadystatechange\",\"readyState\",\"status\",\"open\",\"setRequestHeader\",\"send\",\"JSON\",\"stringify\"],\"mappings\":\"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\",\"file\":\"editor.bundle.js\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, {\\n \\t\\t\\t\\tconfigurable: false,\\n \\t\\t\\t\\tenumerable: true,\\n \\t\\t\\t\\tget: getter\\n \\t\\t\\t});\\n \\t\\t}\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 7);\\n\\n\\n\\n// WEBPACK FOOTER //\\n// webpack/bootstrap 90a2a6829fa9a3658b8c\",\"'use strict'\\nimport Editor from './application/Editor'\\n\\n/**\\n * Initializes all the click and drag events.\\n */\\ndocument.addEventListener('DOMContentLoaded', () => {\\n  let editor = new Editor()\\n  let gameObjects = ['stone', 'coin', 'spawn']\\n  let boxes = document.getElementsByClassName('box')\\n  for (let i = 0; i < boxes.length; i++) {\\n    boxes[i].addEventListener('dragover', editor.allowDrop, false)\\n    boxes[i].addEventListener('drop', editor.drop, false)\\n    boxes[i].addEventListener('click', editor.setItem, false)\\n  }\\n  gameObjects.forEach(object => {\\n    document.getElementById(object).addEventListener('dragstart', editor.drag, false)\\n    document.getElementById(object).addEventListener('click', editor.toggleSelectItem, false)\\n  })\\n  document.getElementById('submitButton').addEventListener('click', editor.submitLevel, false)\\n})\\n\\n\\n\\n// WEBPACK FOOTER //\\n// ./src/editor/client/app.js\",\"'use strict'\\nimport Ajax from '../../../lib/Ajax'\\n\\nexport default class Editor {\\n  constructor () {\\n    this.objectsCount = 0\\n    this.activeItem = null\\n    this.editorGrid = document.getElementById('area-grid')\\n    this.messageBox = document.getElementById('messages')\\n    this.submitUrl = 'add-level'\\n  }\\n\\n  /**\\n   * Allows dropping on an element by disabling the default behaviour.\\n   *\\n   * @param event drag & drop event\\n   */\\n  allowDrop (event) {\\n    event.preventDefault()\\n  }\\n\\n  /**\\n   * Drag handler.\\n   * @param event drag event\\n   */\\n  drag (event) {\\n    event.dataTransfer.setData('text/html', event.target.id)\\n  }\\n\\n  /**\\n   * Drop handler of drag & drop. Creates a copy of the item in the destination.\\n   * @param event drop event\\n   */\\n  drop (event) {\\n    event.preventDefault()\\n    let data = event.dataTransfer.getData('text/html')\\n    let originalNode = document.getElementById(data)\\n    let clonedNode = originalNode.cloneNode(true)\\n    // Change id to avoid errors\\n    clonedNode.id = originalNode.getAttribute('id') + this.objectsCount\\n    clonedNode.classList.add('fit')\\n    this.objectsCount++\\n    event.target.appendChild(clonedNode)\\n  }\\n\\n  /**\\n   * Toggles the active (highlighted) item in the objects sidebar when clicking on them.\\n   * Also sets the item to be added to the boxes on click.\\n   * @param event click event\\n   */\\n  toggleSelectItem (event) {\\n    let gameObjects = document.querySelectorAll('.game-object')\\n    for (let i = 0; i < gameObjects.length; i++) {\\n      gameObjects[i].classList.remove('selected')\\n    }\\n    this.activeItem = event.target !== this.activeItem ? event.target : null\\n    if (this.activeItem) {\\n      this.activeItem.classList.add('selected')\\n    }\\n  }\\n\\n  /**\\n   * Adds or removes the currently active item to the selected box\\n   * @param event click event\\n   */\\n  setItem (event) {\\n    // use currentTarget instead of target to avoid adding an image to an image\\n    let node = event.currentTarget\\n    if (this.activeItem) {\\n      if (!node.hasChildNodes()) {\\n        let clonedNode = this.activeItem.cloneNode(true)\\n        clonedNode.id = this.activeItem.getAttribute('id') + this.objectsCount\\n        clonedNode.classList.add(this.activeItem.getAttribute('id'))\\n        clonedNode.classList.add('fit')\\n        this.objectsCount++\\n        node.appendChild(clonedNode)\\n      } else {\\n        console.log('hello')\\n        while (node.firstChild) {\\n          console.log(node.firstChild)\\n          node.removeChild(node.firstChild)\\n        }\\n      }\\n    }\\n  }\\n\\n  /**\\n   * Generates a level object based on the graphical box grid.\\n   * Currently only supports one area.\\n   *\\n   * @returns {{}}\\n   */\\n  generateLevel () {\\n    // Area exits and area id are currently hardcoded\\n    // TODO: Make dynamic to allow adding of more areas\\n    let data = {\\n      id: 'newLevel,',\\n      areas: [\\n        {\\n          id: 'area1',\\n          exits: {\\n            left: null,\\n            right: null,\\n            top: null,\\n            bottom: null\\n          },\\n          blocks: []\\n        }\\n      ]\\n    }\\n    let children = this.editorGrid.childNodes\\n    for (let i = 0; i < children.length; i++) {\\n      let childChildNodes = children[i].children\\n      data.areas[0].blocks[i] = []\\n      for (let j = 0; j < childChildNodes.length; j++) {\\n        let node = childChildNodes[j]\\n        if (node.firstChild) {\\n          if (node.firstChild.classList.contains('stone')) {\\n            data.areas[0].blocks[i].push({type: 'stone', solid: true})\\n          } else if (node.firstChild.classList.contains('spawn')) {\\n            data.areas[0].blocks[i].push({type: 'spawn', solid: true})\\n          } else if (node.firstChild.classList.contains('coin')) {\\n            data.areas[0].blocks[i].push({type: 'coin', solid: true})\\n          }\\n        } else {\\n          data.areas[0].blocks[i].push(null)\\n        }\\n      }\\n    }\\n    return data\\n  }\\n\\n  /**\\n   *\\n   * @param message\\n   */\\n  displayMessage (message) {\\n    this.messageBox.appendChild(document.createTextNode(message))\\n  }\\n\\n  /**\\n   * Submit the level to 'add-level' route\\n   *\\n   * @param event submit event\\n   */\\n  submitLevel (event) {\\n    event.preventDefault()\\n    Ajax.createAndSendRequest(\\n      this.generateLevel(),\\n      this.submitUrl,\\n      this.displayMessage('Level submitted!')\\n    )\\n  }\\n}\\n\\n\\n\\n// WEBPACK FOOTER //\\n// ./src/editor/client/application/Editor.js\",\"export default class Ajax {\\n  /**\\n   * Create an createAndSendRequest request and submit data to an url location.\\n   * Sends the data as JSON string.\\n   *\\n   * @param {{}} data object containing data to submit\\n   * @param url location to submit the data to\\n   * @param callback success callback function\\n   */\\n  static createAndSendRequest (data, url, callback) {\\n    let xHttp = new XMLHttpRequest()\\n    xHttp.onreadystatechange = () => {\\n      if (this.readyState === 4 && this.status === 200) {\\n        callback()\\n      }\\n    }\\n    xHttp.open('POST', url)\\n    xHttp.setRequestHeader('Content-Type', 'application/json')\\n    xHttp.send(JSON.stringify(data))\\n  }\\n}\\n\\n\\n\\n// WEBPACK FOOTER //\\n// ./src/lib/Ajax.js\"],\"sourceRoot\":\"\"}"],"file":"editor.bundle.js.map"}