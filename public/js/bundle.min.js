!function(e){function t(o){if(n[o])return n[o].exports;var u=n[o]={i:o,l:!1,exports:{}};return e[o].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(){s.emit("movement",l.keyActionsRegister),window.requestAnimationFrame(function(){return u()})}var r=o(n(1)),i=o(n(2)),a=o(n(3)),s=io(),c=document.getElementById("game"),l=new a.default(c),d=new r.default,f=new i.default,h=void 0;s.on("state",function(e){console.log("changed state"),h.clearRect(0,0,c.width,c.height),console.log(e),e.players.forEach(function(t){t.currentArea===e.players[void 0].currentArea&&h.drawImage(f.getAsset(t.material.name),t.position.x,t.position.y,t.width,t.height)}),e.players[void 0].currentArea.blocks.forEach(function(e){h.drawImage(f.getAsset(e.material.name),e.position.x,e.position.y,e.width,e.height)})}),document.addEventListener("DOMContentLoaded",(d.queueDownload("ambient","assets/audio/ambient/ambient.mp3"),d.queueDownload("jump","assets/audio/effects/jump.wav"),void d.loadAll(function(){d.playSound("ambient",!0),f.queueDownload("background","assets/textures/background.jpg"),f.queueDownload("player","assets/textures/player.png"),f.queueDownload("stone-block","assets/textures/stone-block.jpg"),f.queueDownload("heart","assets/textures/heart.png"),f.downLoadAll(function(){s.emit("new player")})}))),s.on("message",function(e){console.log(e)}),s.on("registered player",function(e){c.getContext?(h=c.getContext("2d"),u()):document.getElementById("unsupported").textContent="Please update your browser or download another one which supports HTML5"})},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.bufferCache=[],this.downloadQueue=[],this.succesCount=0,this.errorCount=0;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext}catch(e){alert("Web Audio API is not supported in this browser")}}return u(e,[{key:"queueDownload",value:function(e,t){this.downloadQueue.push({name:e,path:t})}},{key:"loadAll",value:function(e){0===this.downloadQueue.length&&e();var t=this;this.downloadQueue.forEach(function(n){t.load(n.name,n.path,e)})}},{key:"load",value:function(e,t,n){var o=this,u=new XMLHttpRequest;u.open("GET",t,!0),u.responseType="arraybuffer",u.onload=function(){o.context.decodeAudioData(u.response,function(t){o.bufferCache[e]=t,o.succesCount+=1,o.done()&&n()})},u.onerror=function(){o.errorCount+=1,o.done()&&n()},u.send()}},{key:"playSound",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.context.createBufferSource();n.buffer=this.bufferCache[e],n.connect(this.context.destination),t&&(n.loop=t,n.loopEnd=Math.floor(n.buffer.duration)),n.start(0)}},{key:"done",value:function(){return this.downloadQueue.length===this.succesCount+this.errorCount}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.downloadQueue=[],this.cache={},this.succesCount=0,this.errorCount=0}return u(e,[{key:"queueDownload",value:function(e,t){this.downloadQueue.push({name:e,path:t})}},{key:"downLoadAll",value:function(e){var t=this;0===this.downloadQueue.length&&e();var n=this;this.downloadQueue.forEach(function(o){var u=new Image;u.addEventListener("load",function(){n.succesCount+=1,n.done()&&e()},!1),u.addEventListener("error",function(){n.errorCount+=1,n.done()&&e()},!1),u.src=o.path,t.cache[o.name]=u})}},{key:"getAsset",value:function(e){return this.cache[e]}},{key:"done",value:function(){return this.downloadQueue.length===this.succesCount+this.errorCount}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.initializeKeyHandler(),this.keyActionsRegister={}}return u(e,[{key:"initializeKeyHandler",value:function(){var e=this;window.addEventListener("keydown",function(t){e.keyActionsRegister[t.key]=!0}),window.addEventListener("keyup",function(t){e.keyActionsRegister[t.key]=!1})}},{key:"getKeyActionsRegister",value:function(){return this.keyActionsRegister}}]),e}();t.default=r}]);
//# sourceMappingURL=bundle.min.js.map
