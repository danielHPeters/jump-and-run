!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){l.emit("movement",h.keyActionsRegister),window.requestAnimationFrame(function(){return i()})}function r(e){if(m&&e[m]&&y){b.update(),v.clearRect(0,0,f.width,f.height),Object.keys(e).forEach(function(t){var n=e[t];n.viewport.areaId===e[m].viewport.areaId&&b.draw(v,n.position._x,n.position._y,n.width,n.height)}),e[m].viewport.blocks.forEach(function(e){v.drawImage(p.getAsset(e.material.name),e.position._x,e.position._y,e.width,e.height)});for(var t=f.width-35,n=0;n<e[m].lives;n++)v.drawImage(p.getAsset("heart"),t,5,30,30),t-=30;e[m].jumping}}var u=o(n(1)),a=o(n(2)),s=o(n(3)),c=o(n(4)),d=o(n(5)),l=io(),f=document.getElementById("game"),h=new s.default(f),w=new u.default,p=new a.default,m=void 0,v=void 0,y=!1,g=void 0,b=void 0;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},document.addEventListener("DOMContentLoaded",void(f.getContext?(l.emit("new player"),v=f.getContext("2d"),w.queueDownload("ambient","assets/audio/ambient/ambient.mp3"),w.queueDownload("jump","assets/audio/effects/jump.wav"),p.queueDownload("background","assets/textures/background.png"),p.queueDownload("player","assets/textures/player.png"),p.queueDownload("stone-block","assets/textures/stone-block.jpg"),p.queueDownload("heart","assets/textures/heart.png"),g=new c.default("assets/textures/characters.png",32,32),b=new d.default(g,3,0,4),w.loadAll(function(){p.loadAll(function(){w.playSound("ambient",!0),i(),document.getElementById("background").getContext("2d").drawImage(p.getAsset("background"),0,0,f.width,f.height),y=!0})})):document.getElementById("unsupported").textContent="Please update your browser or download another one which supports HTML5")),l.on("connect",function(){l.emit("new player"),m=l.io.engine.id}),l.on("state",function(e){r(e)})},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.bufferCache=[],this.downloadQueue=[],this.succesCount=0,this.errorCount=0;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext}catch(e){alert("Web Audio API is not supported in this browser")}}return i(e,[{key:"queueDownload",value:function(e,t){this.downloadQueue.push({name:e,path:t})}},{key:"loadAll",value:function(e){0===this.downloadQueue.length&&e();var t=this;this.downloadQueue.forEach(function(n){t.load(n.name,n.path,e)})}},{key:"load",value:function(e,t,n){var o=this,i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){o.context.decodeAudioData(i.response,function(t){o.bufferCache[e]=t,o.succesCount+=1,o.done()&&n()})},i.onerror=function(){o.errorCount+=1,o.done()&&n()},i.send()}},{key:"playSound",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.context.createBufferSource();n.buffer=this.bufferCache[e],n.connect(this.context.destination),t&&(n.loop=t,n.loopEnd=Math.floor(n.buffer.duration)),n.start(0)}},{key:"done",value:function(){return this.downloadQueue.length===this.succesCount+this.errorCount}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.downloadQueue=[],this.cache={},this.succesCount=0,this.errorCount=0}return i(e,[{key:"queueDownload",value:function(e,t){this.downloadQueue.push({name:e,path:t})}},{key:"loadAll",value:function(e){var t=this;0===this.downloadQueue.length&&e();var n=this;this.downloadQueue.forEach(function(o){var i=new Image;i.addEventListener("load",function(){n.succesCount+=1,n.done()&&e()},!1),i.addEventListener("error",function(){n.errorCount+=1,n.done()&&e()},!1),i.src=o.path,t.cache[o.name]=i})}},{key:"getAsset",value:function(e){return this.cache[e]}},{key:"done",value:function(){return this.downloadQueue.length===this.succesCount+this.errorCount}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e),this.initializeKeyHandler(),this.initializeTouchHandler(),this.keyActionsRegister={}}return i(e,[{key:"initializeKeyHandler",value:function(){var e=this;window.addEventListener("keydown",function(t){e.keyActionsRegister[t.key]=!0},!1),window.addEventListener("keyup",function(t){e.keyActionsRegister[t.key]=!1},!1)}},{key:"initializeTouchHandler",value:function(){window.addEventListener("touchstart",function(n){n.preventDefault(),e=n.touches[0].clientX,t=n.touches[0].clientY},!1),window.addEventListener("touchmove",function(o){if(o.preventDefault(),e&&t){var i=o.touches[0].clientX,r=o.touches[0].clientY,u=t-r;e-i>0?n.keyActionsRegister.a=!0:n.keyActionsRegister.d=!0,u>0&&(n.keyActionsRegister.w=!0),e=null,t=null}},!1),window.addEventListener("touchend",function(e){e.preventDefault(),Object.keys(n.keyActionsRegister).forEach(function(e){n.keyActionsRegister[e]=!1})},!1);var e=null,t=null,n=this}},{key:"getKeyActionsRegister",value:function(){return this.keyActionsRegister}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,i){var r=this;o(this,e),this.image=new Image,this.frameWidth=n,this.frameHeight=i,this.image.addEventListener("load",function(){r.framesPerRow=Math.floor(r.image.width/r.frameWidth)}),this.image.src=t}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t,n,i,r){o(this,e),this.spriteSheet=t,this.speed=n,this.sequence=[],this.currentFrame=0,this.counter=0;for(var u=i;u<=r;u++)this.sequence.push(u)}return i(e,[{key:"update",value:function(){this.counter===this.speed-1&&(this.currentFrame=(this.currentFrame+1)%this.sequence.length),this.counter=(this.counter+1)%this.speed}},{key:"draw",value:function(e,t,n,o,i){var r=Math.floor(this.sequence[this.currentFrame]/this.spriteSheet.framesPerRow),u=Math.floor(this.sequence[this.currentFrame]%this.spriteSheet.framesPerRow);e.drawImage(this.spriteSheet.image,u*this.spriteSheet.frameWidth,r*this.spriteSheet.frameHeight,this.spriteSheet.frameWidth,this.spriteSheet.frameHeight,t,n,o,i)}}]),e}();t.default=r}]);
//# sourceMappingURL=bundle.min.js.map
