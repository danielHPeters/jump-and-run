{"version":3,"sources":["webpack:/webpack/bootstrap 086fe4a808d659875651","webpack:///src/editor/client/app.js","webpack:///src/editor/client/application/Editor.js","webpack:///src/lib/Ajax.js"],"names":["__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","document","addEventListener","editor","_Editor2","default","gameObjects","boxes","getElementsByClassName","length","allowDrop","drop","setItem","forEach","getElementById","drag","toggleSelectItem","submitLevel","Editor","_classCallCheck","this","objectsCount","activeItem","editorGrid","messageBox","submitUrl","event","preventDefault","dataTransfer","setData","target","id","data","getData","originalNode","clonedNode","cloneNode","getAttribute","classList","add","appendChild","querySelectorAll","remove","node","currentTarget","hasChildNodes","console","log","firstChild","removeChild","areas","exits","left","right","top","bottom","blocks","children","childNodes","childChildNodes","j","contains","push","type","solid","message","createTextNode","_Ajax2","createAndSendRequest","generateLevel","displayMessage","Ajax","url","callback","_this","xHttp","XMLHttpRequest","onreadystatechange","readyState","status","open","setRequestHeader","send","JSON","stringify"],"mappings":"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","file":"editor.bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 086fe4a808d659875651","'use strict'\nimport Editor from './application/Editor'\n\n/**\n * Initializes all the click and drag events.\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n  let editor = new Editor()\n  let gameObjects = ['stone', 'coin', 'spawn']\n  let boxes = document.getElementsByClassName('box')\n  for (let i = 0; i < boxes.length; i++) {\n    boxes[i].addEventListener('dragover', editor.allowDrop, false)\n    boxes[i].addEventListener('drop', editor.drop, false)\n    boxes[i].addEventListener('click', editor.setItem, false)\n  }\n  gameObjects.forEach(object => {\n    document.getElementById(object).addEventListener('dragstart', editor.drag, false)\n    document.getElementById(object).addEventListener('click', editor.toggleSelectItem, false)\n  })\n  document.getElementById('submitButton').addEventListener('click', editor.submitLevel, false)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/client/app.js","'use strict'\nimport Ajax from '../../../lib/Ajax'\n\nexport default class Editor {\n  constructor () {\n    this.objectsCount = 0\n    this.activeItem = null\n    this.editorGrid = document.getElementById('area-grid')\n    this.messageBox = document.getElementById('messages')\n    this.submitUrl = 'add-level'\n  }\n\n  /**\n   * Allows dropping on an element by disabling the default behaviour.\n   *\n   * @param event drag & drop event\n   */\n  allowDrop (event) {\n    event.preventDefault()\n  }\n\n  /**\n   * Drag handler.\n   * @param event drag event\n   */\n  drag (event) {\n    event.dataTransfer.setData('text/html', event.target.id)\n  }\n\n  /**\n   * Drop handler of drag & drop. Creates a copy of the item in the destination.\n   * @param event drop event\n   */\n  drop (event) {\n    event.preventDefault()\n    let data = event.dataTransfer.getData('text/html')\n    let originalNode = document.getElementById(data)\n    let clonedNode = originalNode.cloneNode(true)\n    // Change id to avoid errors\n    clonedNode.id = originalNode.getAttribute('id') + this.objectsCount\n    clonedNode.classList.add('fit')\n    this.objectsCount++\n    event.target.appendChild(clonedNode)\n  }\n\n  /**\n   * Toggles the active (highlighted) item in the objects sidebar when clicking on them.\n   * Also sets the item to be added to the boxes on click.\n   * @param event click event\n   */\n  toggleSelectItem (event) {\n    let gameObjects = document.querySelectorAll('.game-object')\n    for (let i = 0; i < gameObjects.length; i++) {\n      gameObjects[i].classList.remove('selected')\n    }\n    this.activeItem = event.target !== this.activeItem ? event.target : null\n    if (this.activeItem) {\n      this.activeItem.classList.add('selected')\n    }\n  }\n\n  /**\n   * Adds or removes the currently active item to the selected box\n   * @param event click event\n   */\n  setItem (event) {\n    // use currentTarget instead of target to avoid adding an image to an image\n    let node = event.currentTarget\n    if (this.activeItem) {\n      if (!node.hasChildNodes()) {\n        let clonedNode = this.activeItem.cloneNode(true)\n        clonedNode.id = this.activeItem.getAttribute('id') + this.objectsCount\n        clonedNode.classList.add(this.activeItem.getAttribute('id'))\n        clonedNode.classList.add('fit')\n        this.objectsCount++\n        node.appendChild(clonedNode)\n      } else {\n        console.log('hello')\n        while (node.firstChild) {\n          console.log(node.firstChild)\n          node.removeChild(node.firstChild)\n        }\n      }\n    }\n  }\n\n  /**\n   * Generates a level object based on the graphical box grid.\n   * Currently only supports one area.\n   *\n   * @returns {{}}\n   */\n  generateLevel () {\n    // Area exits and area id are currently hardcoded\n    // TODO: Make dynamic to allow adding of more areas\n    let data = {\n      id: 'newLevel,',\n      areas: [\n        {\n          id: 'area1',\n          exits: {\n            left: null,\n            right: null,\n            top: null,\n            bottom: null\n          },\n          blocks: []\n        }\n      ]\n    }\n    let children = this.editorGrid.childNodes\n    for (let i = 0; i < children.length; i++) {\n      let childChildNodes = children[i].children\n      data.areas[0].blocks[i] = []\n      for (let j = 0; j < childChildNodes.length; j++) {\n        let node = childChildNodes[j]\n        if (node.firstChild) {\n          if (node.firstChild.classList.contains('stone')) {\n            data.areas[0].blocks[i].push({type: 'stone', solid: true})\n          } else if (node.firstChild.classList.contains('spawn')) {\n            data.areas[0].blocks[i].push({type: 'spawn', solid: true})\n          } else if (node.firstChild.classList.contains('coin')) {\n            data.areas[0].blocks[i].push({type: 'coin', solid: true})\n          }\n        } else {\n          data.areas[0].blocks[i].push(null)\n        }\n      }\n    }\n    return data\n  }\n\n  /**\n   *\n   * @param message\n   */\n  displayMessage (message) {\n    this.messageBox.appendChild(document.createTextNode(message))\n  }\n\n  /**\n   * Submit the level to 'add-level' route\n   *\n   * @param event submit event\n   */\n  submitLevel (event) {\n    event.preventDefault()\n    Ajax.createAndSendRequest(\n      this.generateLevel(),\n      this.submitUrl,\n      this.displayMessage('Level submitted!')\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/editor/client/application/Editor.js","export default class Ajax {\n  /**\n   * Create an createAndSendRequest request and submit data to an url location.\n   * Sends the data as JSON string.\n   *\n   * @param {{}} data object containing data to submit\n   * @param url location to submit the data to\n   * @param callback success callback function\n   */\n  static createAndSendRequest (data, url, callback) {\n    let xHttp = new XMLHttpRequest()\n    xHttp.onreadystatechange = () => {\n      if (this.readyState === 4 && this.status === 200) {\n        callback()\n      }\n    }\n    xHttp.open('POST', url)\n    xHttp.setRequestHeader('Content-Type', 'application/json')\n    xHttp.send(JSON.stringify(data))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/Ajax.js"]}