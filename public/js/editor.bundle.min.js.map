{"version":3,"sources":["editor.bundle.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","object","property","prototype","hasOwnProperty","p","s","0","value","Ajax","xHttp","addEventListener","callback","response","opts","method","defaults","url","async","setRequestHeader","contentType","responseType","_typeof","data","JSON","stringify","send","Editor_1","document","gameObjects","boxes","editor","allowDrop","bind","setItem","forEach","getElementById","drag","toggleSelectItem","submitLevel","13","Ajax_1","Editor","_classCallCheck","this","objectsCount","activeItem","_createClass","key","event","preventDefault","id","clonedNode","originalNode","cloneNode","getAttribute","classList","add","target","appendChild","querySelectorAll","remove","node","currentTarget","console","log","firstChild","removeChild","editorGrid","messageBox","submitUrl","exits","top","blocks","children","length","childChildNodes","areas","j","elem","contains","push","type","solid","message","createTextNode","create","left"],"mappings":"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","file":"editor.bundle.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Ajax {\n    static create(opts, callback) {\n        let xHttp = new XMLHttpRequest();\n        xHttp.addEventListener('load', () => {\n            callback(xHttp.response);\n        });\n        xHttp.open(opts.method ? opts.method : Ajax.defaults.method, opts.url ? opts.url : Ajax.defaults.url, opts.async ? opts.async : Ajax.defaults.async);\n        if (opts.hasOwnProperty('contentType')) {\n            xHttp.setRequestHeader('Content-Type', opts.contentType ? opts.contentType : Ajax.defaults.contentType);\n        }\n        if (opts.hasOwnProperty('responseType')) {\n            xHttp.responseType = opts.responseType;\n        }\n        if (opts.hasOwnProperty('data') && typeof opts.data === 'object') {\n            opts.data = JSON.stringify(opts.data);\n        }\n        xHttp.send(opts.data ? opts.data : null);\n    }\n}\nAjax.defaults = {\n    url: '',\n    method: 'GET',\n    contentType: 'text/html',\n    async: true,\n    data: null\n};\nexports.Ajax = Ajax;\n\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Editor_1 = __webpack_require__(13);\ndocument.addEventListener('DOMContentLoaded', () => {\n    let editor = new Editor_1.Editor();\n    let gameObjects = ['stone', 'coin', 'spawn'];\n    let boxes = document.getElementsByClassName('box');\n    for (let i = 0; i < boxes.length; i++) {\n        boxes[i].addEventListener('dragover', editor.allowDrop.bind(editor));\n        boxes[i].addEventListener('drop', editor.drop.bind(editor));\n        boxes[i].addEventListener('click', editor.setItem.bind(editor));\n    }\n    gameObjects.forEach(object => {\n        document.getElementById(object).addEventListener('dragstart', editor.drag.bind(editor));\n        document.getElementById(object).addEventListener('click', editor.toggleSelectItem.bind(editor));\n    });\n    document.getElementById('submitButton').addEventListener('click', editor.submitLevel.bind(editor));\n});\n\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Ajax_1 = __webpack_require__(0);\nclass Editor {\n    constructor() {\n        this.objectsCount = 0;\n        this.activeItem = null;\n        this.editorGrid = document.getElementById('area-grid');\n        this.messageBox = document.getElementById('messages');\n        this.submitUrl = 'add-level';\n    }\n    allowDrop(event) {\n        event.preventDefault();\n    }\n    drag(event) {\n        event.dataTransfer.setData('text/html', event.target.id);\n    }\n    drop(event) {\n        event.preventDefault();\n        let data = event.dataTransfer.getData('text/html');\n        let originalNode = document.getElementById(data);\n        let clonedNode = originalNode.cloneNode(true);\n        clonedNode.id = originalNode.getAttribute('id') + this.objectsCount;\n        clonedNode.classList.add('fit');\n        this.objectsCount++;\n        event.target.appendChild(clonedNode);\n    }\n    toggleSelectItem(event) {\n        let gameObjects = document.querySelectorAll('.game-object');\n        for (let i = 0; i < gameObjects.length; i++) {\n            gameObjects[i].classList.remove('selected');\n        }\n        this.activeItem = event.target !== this.activeItem ? event.target : null;\n        if (this.activeItem) {\n            this.activeItem.classList.add('selected');\n        }\n    }\n    setItem(event) {\n        let node = event.currentTarget;\n        if (this.activeItem) {\n            if (!node.hasChildNodes()) {\n                let clonedNode = this.activeItem.cloneNode(true);\n                clonedNode.id = this.activeItem.getAttribute('id') + this.objectsCount;\n                clonedNode.classList.add(this.activeItem.getAttribute('id'));\n                clonedNode.classList.add('fit');\n                this.objectsCount++;\n                node.appendChild(clonedNode);\n            }\n            else {\n                console.log('hello');\n                while (node.firstChild) {\n                    console.log(node.firstChild);\n                    node.removeChild(node.firstChild);\n                }\n            }\n        }\n    }\n    generateLevel() {\n        let data = {\n            id: 'newLevel,',\n            areas: [\n                {\n                    id: 'area1',\n                    exits: {\n                        left: null,\n                        right: null,\n                        top: null,\n                        bottom: null\n                    },\n                    blocks: []\n                }\n            ]\n        };\n        let children = this.editorGrid.childNodes;\n        for (let i = 0; i < children.length; i++) {\n            let childChildNodes = children[i].children;\n            data.areas[0].blocks[i] = [];\n            for (let j = 0; j < childChildNodes.length; j++) {\n                let node = childChildNodes[j];\n                if (node.firstChild) {\n                    let elem = node.firstChild;\n                    if (elem.classList.contains('stone')) {\n                        data.areas[0].blocks[i].push({ type: 'stone', solid: true });\n                    }\n                    else if (elem.classList.contains('spawn')) {\n                        data.areas[0].blocks[i].push({ type: 'spawn', solid: true });\n                    }\n                    else if (elem.classList.contains('coin')) {\n                        data.areas[0].blocks[i].push({ type: 'coin', solid: true });\n                    }\n                }\n                else {\n                    data.areas[0].blocks[i].push(null);\n                }\n            }\n        }\n        return data;\n    }\n    displayMessage(message) {\n        this.messageBox.appendChild(document.createTextNode(message));\n    }\n    submitLevel(event) {\n        event.preventDefault();\n        Ajax_1.Ajax.create({\n            method: 'POST',\n            url: this.submitUrl,\n            data: this.generateLevel()\n        }, this.displayMessage('Level submitted!'));\n    }\n}\nexports.Editor = Editor;\n\n\n/***/ })\n\n/******/ });\n//# sourceMappingURL=editor.bundle.js.map"]}