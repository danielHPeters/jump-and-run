{"version":3,"sources":["game.bundle.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","p","s","value","Ajax","_classCallCheck","this","_createClass","key","opts","xHttp","XMLHttpRequest","addEventListener","callback","response","method","object","defaults","property","url","async","hasOwnProperty","setRequestHeader","contentType","responseType","_typeof","data","send","Actions","JSON","stringify","InputManager","_Observable_1$Observa","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","inputMap","settings","keyBoard","init","initializeTouchHandler","touches","start","_inherits","Observable_1","Observable","event","_this2","state","notify","window","evt","preventDefault","touchstartX","pageX","touchstartY","pageY","el","thisInstance","changedTouches","move","touchMoveY","length","reset","button","getElementById","GameClient_1","toucheMoveX","console","log","socket","on","client","playerId","io","id","render","players","AssetManager_1","Animation_1","CollideAble_1","Settings_1","GameClient","remote","Settings","canvas","backgroundCanvas","document","inputManager","InputManager_1","observers","push","assetManager","AssetManager","spritesLoaded","ctx","animations","_this3","getContext","queueDownload","EntityType","MAIN_THEME","AssetType","AUDIO","JUMP","BACKGROUND","SPRITE","PLAYER","STONE","HEART","COIN","PLAYER_SHEET","SPRITE_SHEET","frameHeight","COIN_SHEET","Remote_1","right","default","getSpriteSheet","left","current","getSound","AUDIO_LOOP","play","emit","drawImage","getSprite","width","height","loop","textContent","_this4","requestAnimationFrame","player","_this5","UP","currentPlayer","grounded","update","coin","viewport","areaId","registeredInputs","RIGHT","LEFT","idle","draw","position","_x","_y","blocks","forEach","block","type","x","frameWidth","fillText","coins","toString","_state","observer","_observers","filter","obs","_this6","set","clearRect","Ajax_1","SpriteSheet_1","Sound_1","cache","sprites","spriteSheets","audio","downloadCount","queue","initAudioContext","AudioContext","webkitAudioContext","audioContext","fillStyle","masterGain","effectsGain","createGain","ambientGain","gain","connect","destination","e","path","arguments","undefined","item","_this7","create","decodeAudio","_this8","then","buffer","done","error","_this9","sprite","Image","src","_this10","spriteSheet","SpriteSheet","_this11","loadAudioFromUrl","Sound","image","_image","_frameWidth","_frameHeight","_framesPerRow","Math","floor","framesPerRow","gainNode","playing","source","Animation","speed","end","offsetBottom","sequence","counter","frame","row","currentFrame","col","y","canvasWidth","canvasHeight","w","DOWN","a","space","RESTART","maxVelocity","fireDelay","friction","acceleration","master","ambient","effects","Remote"],"mappings":"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","file":"game.bundle.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Ajax {\n    static create(opts, callback) {\n        let xHttp = new XMLHttpRequest();\n        xHttp.addEventListener('load', () => {\n            callback(xHttp.response);\n        });\n        xHttp.open(opts.method ? opts.method : Ajax.defaults.method, opts.url ? opts.url : Ajax.defaults.url, opts.async ? opts.async : Ajax.defaults.async);\n        if (opts.hasOwnProperty('contentType')) {\n            xHttp.setRequestHeader('Content-Type', opts.contentType ? opts.contentType : Ajax.defaults.contentType);\n        }\n        if (opts.hasOwnProperty('responseType')) {\n            xHttp.responseType = opts.responseType;\n        }\n        if (opts.hasOwnProperty('data') && typeof opts.data === 'object') {\n            opts.data = JSON.stringify(opts.data);\n        }\n        xHttp.send(opts.data ? opts.data : null);\n    }\n}\nAjax.defaults = {\n    url: '',\n    method: 'GET',\n    contentType: 'text/html',\n    async: true,\n    data: null\n};\nexports.Ajax = Ajax;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Observable_1 = __webpack_require__(4);\nvar Actions;\n(function (Actions) {\n    Actions[\"UP\"] = \"UP\";\n    Actions[\"DOWN\"] = \"DOWN\";\n    Actions[\"LEFT\"] = \"LEFT\";\n    Actions[\"RIGHT\"] = \"RIGHT\";\n    Actions[\"SHOOT\"] = \"SHOOT\";\n    Actions[\"RESTART\"] = \"RESTART\";\n    Actions[\"JUMP\"] = \"JUMP\";\n})(Actions = exports.Actions || (exports.Actions = {}));\nclass InputManager extends Observable_1.Observable {\n    constructor(settings) {\n        super();\n        this.inputMap = settings.keyBoard;\n        this.init();\n        this.initializeTouchHandler();\n        this.touches = {\n            start: [],\n            move: []\n        };\n    }\n    init() {\n        window.addEventListener('keydown', event => {\n            let key = event.key !== ' ' ? event.key : 'space';\n            this.state[this.inputMap[key]] = true;\n            this.notify();\n        });\n        window.addEventListener('keyup', event => {\n            let key = event.key !== ' ' ? event.key : 'space';\n            this.state[this.inputMap[key]] = false;\n            this.notify();\n        });\n    }\n    initializeTouchHandler() {\n        let button = document.getElementById('move');\n        let el = button ? button : window;\n        el.addEventListener('touchstart', handleTouchStart, false);\n        el.addEventListener('touchmove', handleTouchMove, false);\n        el.addEventListener('touchend', handleTouchEnd, false);\n        el.addEventListener('contextmenu', event => {\n            event.preventDefault();\n            return false;\n        });\n        let start = [];\n        let move = [];\n        let touchstartX = 0;\n        let touchstartY = 0;\n        let toucheMoveX = 0;\n        let touchMoveY = 0;\n        let thisInstance = this;\n        function handleTouchStart(evt) {\n            evt.preventDefault();\n            start = evt.touches;\n            touchstartX = evt.touches[0].pageX;\n            touchstartY = evt.touches[0].pageY;\n        }\n        function handleTouchMove(evt) {\n            thisInstance.reset();\n            evt.preventDefault();\n            move = evt.changedTouches;\n            toucheMoveX = evt.touches[0].pageX;\n            touchMoveY = evt.touches[0].pageY;\n            for (let i = 0; i < evt.touches.length; i++) {\n                if (move[i].pageX < start[i].pageX) {\n                    thisInstance.state[thisInstance.inputMap['a']] = true;\n                }\n                if (move[i].pageX > start[i].pageX) {\n                    thisInstance.state[thisInstance.inputMap['d']] = true;\n                }\n                if (move[i].pageY < start[i].pageY) {\n                    thisInstance.state[thisInstance.inputMap['w']] = true;\n                }\n                if (move[i].pageY > start[i].pageY) {\n                    thisInstance.state[thisInstance.inputMap['s']] = true;\n                }\n                thisInstance.notify();\n            }\n        }\n        function handleTouchEnd(evt) {\n            evt.preventDefault();\n            thisInstance.reset();\n        }\n    }\n    shoot() {\n        this.state[this.inputMap['space']] = true;\n    }\n    cancelShoot() {\n        this.state[this.inputMap['space']] = false;\n    }\n    reset() {\n        this.state[this.inputMap['w']] = false;\n        this.state[this.inputMap['a']] = false;\n        this.state[this.inputMap['s']] = false;\n        this.state[this.inputMap['d']] = false;\n    }\n}\nexports.InputManager = InputManager;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst GameClient_1 = __webpack_require__(3);\nconst Remote_1 = __webpack_require__(11);\ndocument.addEventListener('DOMContentLoaded', () => {\n    let socket = io();\n    let remote = new Remote_1.default(socket);\n    let client = new GameClient_1.default(remote, document.getElementById('game'));\n    console.log('hi');\n    socket.on('connect', () => {\n        socket.emit('new player');\n        client.playerId = socket.io['engine'].id;\n    });\n    socket.on('state', players => {\n        client.render(players);\n    });\n});\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst InputManager_1 = __webpack_require__(1);\nconst AssetManager_1 = __webpack_require__(5);\nconst Animation_1 = __webpack_require__(8);\nconst CollideAble_1 = __webpack_require__(9);\nconst Settings_1 = __webpack_require__(10);\nclass GameClient {\n    constructor(remote, canvas) {\n        this.settings = new Settings_1.Settings();\n        this.canvas = canvas;\n        this.backgroundCanvas = document.getElementById('background');\n        this.inputManager = new InputManager_1.InputManager(this.settings);\n        this.inputManager.observers.push(remote);\n        this.inputManager.observers.push(this);\n        this.assetManager = new AssetManager_1.AssetManager();\n        this.spritesLoaded = false;\n        this.ctx = null;\n        this.animations = {};\n        this.init();\n    }\n    init() {\n        console.log('start');\n        if (this.canvas.getContext) {\n            this.ctx = this.canvas.getContext('2d');\n            this.assetManager.queueDownload(CollideAble_1.EntityType.MAIN_THEME, 'assets/audio/ambient/ambient.mp3', AssetManager_1.AssetType.AUDIO);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.JUMP, 'assets/audio/effects/jump.wav', AssetManager_1.AssetType.AUDIO);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.BACKGROUND, 'assets/textures/background.png', AssetManager_1.AssetType.SPRITE);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.PLAYER, 'assets/textures/player.png', AssetManager_1.AssetType.SPRITE);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.STONE, 'assets/textures/stone-block.jpg', AssetManager_1.AssetType.SPRITE);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.HEART, 'assets/textures/heart.png', AssetManager_1.AssetType.SPRITE);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.COIN, 'assets/textures/coin.png', AssetManager_1.AssetType.SPRITE);\n            this.assetManager.queueDownload(CollideAble_1.EntityType.PLAYER_SHEET, 'assets/textures/test.png', AssetManager_1.AssetType.SPRITE_SHEET, {\n                frameWidth: 32,\n                frameHeight: 64\n            });\n            this.assetManager.queueDownload(CollideAble_1.EntityType.COIN_SHEET, 'assets/textures/coin-sprite-animation-sprite-sheet.png', AssetManager_1.AssetType.SPRITE_SHEET, {\n                frameWidth: 44, frameHeight: 44\n            });\n            this.assetManager.downloadAll(() => {\n                this.animations.right = new Animation_1.default(this.assetManager.getSpriteSheet(CollideAble_1.EntityType.PLAYER_SHEET), 3, 3, 6, 12);\n                this.animations.left = new Animation_1.default(this.assetManager.getSpriteSheet(CollideAble_1.EntityType.PLAYER_SHEET), 3, 3, 6, 12);\n                this.animations.idle = new Animation_1.default(this.assetManager.getSpriteSheet(CollideAble_1.EntityType.PLAYER_SHEET), 10, 0, 2, 12);\n                this.animations.coin = new Animation_1.default(this.assetManager.getSpriteSheet(CollideAble_1.EntityType.COIN_SHEET), 3, 0, 9);\n                this.animations.current = this.animations.left;\n                this.assetManager.getSound(CollideAble_1.EntityType.MAIN_THEME, AssetManager_1.AssetType.AUDIO_LOOP).play(true);\n                this.backgroundCanvas.getContext('2d').drawImage(this.assetManager.getSprite(CollideAble_1.EntityType.BACKGROUND), 0, 0, this.canvas.width, this.canvas.height);\n                this.spritesLoaded = true;\n                this.loop();\n            });\n        }\n        else {\n            document.getElementById('unsupported').textContent = 'Please update your browser or download another one which supports HTML5';\n        }\n    }\n    update(state) {\n        this.state = state;\n    }\n    loop() {\n        this.inputManager.notify();\n        window.requestAnimationFrame(() => this.loop());\n    }\n    render(players) {\n        let currentPlayer = players.find(player => { return player.id === this.playerId; });\n        if (this.playerId && currentPlayer && this.spritesLoaded) {\n            if (this.state[InputManager_1.Actions.UP] || this.state[InputManager_1.Actions.JUMP]) {\n                if (!currentPlayer.jumping && currentPlayer.grounded) {\n                    this.assetManager.getSound(CollideAble_1.EntityType.JUMP, AssetManager_1.AssetType.AUDIO).play();\n                }\n            }\n            this.animations.current.update();\n            this.animations.coin.update();\n            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n            players.forEach(player => {\n                if (player.viewport.areaId === currentPlayer.viewport.areaId) {\n                    if (player.registeredInputs[InputManager_1.Actions.LEFT]) {\n                        this.animations.current = this.animations.left;\n                    }\n                    if (player.registeredInputs[InputManager_1.Actions.RIGHT]) {\n                        this.animations.current = this.animations.right;\n                    }\n                    if (!player.registeredInputs[InputManager_1.Actions.LEFT] && !player.registeredInputs[InputManager_1.Actions.RIGHT]) {\n                        this.animations.current = this.animations.idle;\n                    }\n                    this.animations.current.draw(this.ctx, player.position._x, player.position._y, player.width, player.height);\n                }\n            });\n            currentPlayer.viewport.blocks.forEach(block => {\n                if (block.type === 'stone') {\n                    this.ctx.drawImage(this.assetManager.getSprite(block.type), block.position._x, block.position._y, block.width, block.height);\n                }\n                else if (block.type === 'coin') {\n                    this.animations.coin.draw(this.ctx, block.position._x, block.position._y, block.width, block.height);\n                }\n            });\n            let x = this.canvas.width - 35;\n            for (let i = 0; i < currentPlayer.lives; i++) {\n                this.ctx.drawImage(this.assetManager.getSprite(CollideAble_1.EntityType.HEART), x, 5, 30, 30);\n                x -= 30;\n            }\n            this.ctx.drawImage(this.assetManager.getSprite(CollideAble_1.EntityType.COIN), 5, 5, 30, 30);\n            this.ctx.font = '30px sans-serif';\n            this.ctx.fillStyle = '#081966';\n            this.ctx.fillText(currentPlayer.coins.toString(), 35, 30);\n        }\n    }\n}\nexports.default = GameClient;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Observable {\n    constructor() {\n        this._observers = [];\n        this._state = {};\n    }\n    register(observer) {\n        this._observers.push(observer);\n    }\n    unRegister(observer) {\n        this._observers = this._observers.filter(obs => {\n            return obs !== observer;\n        });\n    }\n    notify() {\n        this._observers.forEach(observer => {\n            observer.update(this._state);\n        });\n    }\n    get observers() {\n        return this._observers;\n    }\n    set observers(observers) {\n        this._observers = observers;\n    }\n    get state() {\n        return this._state;\n    }\n    set state(state) {\n        this._state = state;\n    }\n}\nexports.Observable = Observable;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Ajax_1 = __webpack_require__(0);\nconst SpriteSheet_1 = __webpack_require__(6);\nconst Sound_1 = __webpack_require__(7);\nvar AssetType;\n(function (AssetType) {\n    AssetType[\"SPRITE\"] = \"SPRITE\";\n    AssetType[\"SPRITE_SHEET\"] = \"SPRITE_SHEET\";\n    AssetType[\"AUDIO\"] = \"AUDIO\";\n    AssetType[\"AUDIO_LOOP\"] = \"LOOP\";\n})(AssetType = exports.AssetType || (exports.AssetType = {}));\nclass AssetManager {\n    constructor() {\n        this.cache = {\n            sprites: {},\n            spriteSheets: {},\n            audio: {}\n        };\n        this.downloadCount = 0;\n        this.queue = [];\n        this.initAudioContext();\n    }\n    initAudioContext() {\n        try {\n            window.AudioContext = window.AudioContext || webkitAudioContext;\n            this.audioContext = new AudioContext();\n            this.masterGain = this.audioContext.createGain();\n            this.effectsGain = this.audioContext.createGain();\n            this.ambientGain = this.audioContext.createGain();\n            this.masterGain.gain.value = 1;\n            this.masterGain.connect(this.audioContext.destination);\n            this.effectsGain.connect(this.masterGain);\n            this.ambientGain.connect(this.masterGain);\n            this.ambientGain.gain.value = 1;\n            this.effectsGain.gain.value = 1;\n        }\n        catch (e) {\n            console.log('Web Audio API is not supported in this browser');\n        }\n    }\n    adjustMasterVolume(value) {\n        this.masterGain.gain.value = value;\n    }\n    adjustAmbientVolume(value) {\n        this.ambientGain.gain.value = value;\n    }\n    adjustEffectsVolume(value) {\n        this.effectsGain.gain.value = value;\n    }\n    done() {\n        return this.downloadCount === this.queue.length;\n    }\n    queueDownload(id, path, type, opts = null) {\n        this.queue.push({\n            id: id,\n            path: path,\n            type: type,\n            opts: opts\n        });\n    }\n    loadAudioFromUrl(item, callback) {\n        Ajax_1.Ajax.create({\n            method: 'GET',\n            url: item.path,\n            responseType: 'arraybuffer'\n        }, response => {\n            this.decodeAudio(response, item.id, callback);\n        });\n    }\n    decodeAudio(data, id, callback) {\n        this.audioContext.decodeAudioData(data).then(buffer => {\n            this.cache.audio[id] = buffer;\n            this.downloadCount += 1;\n            if (this.done()) {\n                callback();\n            }\n        }, error => { console.log('Error with decoding audio data' + error); });\n    }\n    loadSprite(item, callback) {\n        let sprite = new Image();\n        sprite.addEventListener('load', () => {\n            this.downloadCount++;\n            if (this.done()) {\n                callback();\n            }\n        });\n        sprite.src = item.path;\n        this.cache.sprites[item.id] = sprite;\n    }\n    loadSpriteSheet(item, callback) {\n        let spriteSheet = new Image();\n        spriteSheet.addEventListener('load', () => {\n            this.cache.spriteSheets[item.id] = new SpriteSheet_1.SpriteSheet(spriteSheet, item.opts.frameWidth || 0, item.opts.frameHeight || 0);\n            this.downloadCount += 1;\n            if (this.done()) {\n                callback();\n            }\n        });\n        spriteSheet.src = item.path;\n    }\n    downloadAll(callback) {\n        this.queue.forEach(item => {\n            if (item.type === AssetType.AUDIO) {\n                this.loadAudioFromUrl(item, callback);\n            }\n            else if (item.type === AssetType.SPRITE) {\n                this.loadSprite(item, callback);\n            }\n            else if (item.type === AssetType.SPRITE_SHEET) {\n                this.loadSpriteSheet(item, callback);\n            }\n        });\n    }\n    getSound(id, type) {\n        let gain;\n        if (type === AssetType.AUDIO) {\n            gain = this.effectsGain;\n        }\n        else {\n            gain = this.ambientGain;\n        }\n        return new Sound_1.Sound(this.audioContext, gain, this.cache.audio[id]);\n    }\n    getSprite(id) {\n        return this.cache.sprites[id];\n    }\n    getSpriteSheet(id) {\n        return this.cache.spriteSheets[id];\n    }\n}\nexports.AssetManager = AssetManager;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SpriteSheet {\n    constructor(image, frameWidth, frameHeight) {\n        this._image = image;\n        this._frameWidth = frameWidth;\n        this._frameHeight = frameHeight;\n        this._framesPerRow = Math.floor(this._image.width / this._frameWidth);\n    }\n    get image() {\n        return this._image;\n    }\n    set image(image) {\n        if (!(image instanceof Image)) {\n            throw new Error('Param tileSetImage must be of type Image!');\n        }\n        this._image = image;\n    }\n    get frameWidth() {\n        return this._frameWidth;\n    }\n    set frameWidth(frameWidth) {\n        this._frameWidth = frameWidth;\n    }\n    get frameHeight() {\n        return this._frameHeight;\n    }\n    set frameHeight(frameHeight) {\n        this._frameHeight = frameHeight;\n    }\n    get framesPerRow() {\n        return this._framesPerRow;\n    }\n    set framesPerRow(framesPerRow) {\n        this._framesPerRow = framesPerRow;\n    }\n}\nexports.SpriteSheet = SpriteSheet;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Sound {\n    constructor(audioContext, masterGain, buffer) {\n        this.audioContext = audioContext;\n        this.masterGain = masterGain;\n        this.buffer = buffer;\n        this.gainNode = this.audioContext.createGain();\n        this.gainNode.gain.value = 0.2;\n        this.gainNode.connect(this.masterGain);\n        this.playing = false;\n    }\n    play(loop = false) {\n        this.source = this.audioContext.createBufferSource();\n        this.source.buffer = this.buffer;\n        this.source.loop = loop;\n        this.source.connect(this.gainNode);\n        this.source.start(0);\n    }\n    stop() {\n        this.source.stop(0);\n    }\n}\nexports.Sound = Sound;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Animation {\n    constructor(spriteSheet, speed, start, end, offsetBottom = 0) {\n        this.spriteSheet = spriteSheet;\n        this.speed = speed;\n        this.sequence = [];\n        this.currentFrame = 0;\n        this.counter = 0;\n        this.offsetBottom = offsetBottom;\n        for (let frame = start; frame <= end; frame++) {\n            this.sequence.push(frame);\n        }\n    }\n    update() {\n        if (this.counter === (this.speed - 1)) {\n            this.currentFrame = (this.currentFrame + 1) % this.sequence.length;\n        }\n        this.counter = (this.counter + 1) % this.speed;\n    }\n    draw(ctx, x, y, width, height) {\n        let row = Math.floor(this.sequence[this.currentFrame] / this.spriteSheet.framesPerRow);\n        let col = Math.floor(this.sequence[this.currentFrame] % this.spriteSheet.framesPerRow);\n        ctx.drawImage(this.spriteSheet.image, col * this.spriteSheet.frameWidth, row * this.spriteSheet.frameHeight, this.spriteSheet.frameWidth, this.spriteSheet.frameHeight - this.offsetBottom, x, y, width, height);\n    }\n}\nexports.default = Animation;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EntityType;\n(function (EntityType) {\n    EntityType[\"PLAYER\"] = \"ship\";\n    EntityType[\"ENEMY\"] = \"enmey\";\n    EntityType[\"ENEMY_BULLET\"] = \"bulletEnemy\";\n    EntityType[\"PLAYER_BULLET\"] = \"bullet\";\n    EntityType[\"BACKGROUND\"] = \"background\";\n    EntityType[\"MAP\"] = \"map\";\n    EntityType[\"GAME_OVER\"] = \"gameOver\";\n    EntityType[\"LASER\"] = \"laser\";\n    EntityType[\"MAIN_THEME\"] = \"shockWave\";\n    EntityType[\"EXPLOSION_I\"] = \"explosion1\";\n    EntityType[\"EXPLOSION_II\"] = \"explosion2\";\n    EntityType[\"BOX\"] = \"box\";\n    EntityType[\"JUMP\"] = \"jump\";\n    EntityType[\"STONE\"] = \"stone\";\n    EntityType[\"HEART\"] = \"heart\";\n    EntityType[\"COIN\"] = \"coint\";\n    EntityType[\"PLAYER_SHEET\"] = \"playerSheet\";\n    EntityType[\"COIN_SHEET\"] = \"cointSheet\";\n})(EntityType = exports.EntityType || (exports.EntityType = {}));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst InputManager_1 = __webpack_require__(1);\nclass Settings {\n    constructor() {\n        this.canvasWidth = 900;\n        this.canvasHeight = 480;\n        this.keyBoard = {\n            'w': InputManager_1.Actions.UP,\n            's': InputManager_1.Actions.DOWN,\n            'a': InputManager_1.Actions.LEFT,\n            'd': InputManager_1.Actions.RIGHT,\n            'space': InputManager_1.Actions.JUMP,\n            'r': InputManager_1.Actions.RESTART\n        };\n        this.player = {\n            maxVelocity: 15,\n            fireDelay: 15,\n            friction: 0.7,\n            acceleration: 3\n        };\n        this.audio = {\n            master: 1,\n            ambient: 1,\n            effects: 1\n        };\n    }\n}\nexports.Settings = Settings;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Remote {\n    constructor(socket) {\n        this.socket = socket;\n    }\n    update(data) {\n        this.socket.emit('input', data);\n    }\n}\nexports.default = Remote;\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=game.bundle.js.map"]}