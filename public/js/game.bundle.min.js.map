{"version":3,"sources":["webpack:/webpack/bootstrap 64584307fde922b6b2a1","webpack:///src/client/app.js","webpack:///src/client/application/GameClient.js","webpack:///src/client/application/AssetManager.js","webpack:///src/client/graphics/2D/SpriteSheet.js","webpack:///src/client/application/InputManager.js","webpack:///src/client/graphics/2D/Animation.js","webpack:///src/client/application/Remote.js"],"names":["__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","document","addEventListener","socket","io","remote","_Remote2","default","client","_GameClient2","getElementById","console","log","on","emit","playerId","engine","id","players","render","GameClient","canvas","_classCallCheck","this","registerLoop","inputManager","_InputManager2","observers","push","assetManager","_AssetManager2","spritesLoaded","ctx","animations","init","window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","_this","getContext","queueDownload","frameWidth","frameHeight","loadAll","right","_Animation2","getSpriteSheet","left","idle","coin","current","playSound","drawImage","getSprite","width","height","update","textContent","_this2","notify","_this3","currentPlayer","find","player","registeredInputs","jumping","grounded","clearRect","forEach","viewport","areaId","draw","position","_x","_y","blocks","block","type","x","lives","font","fillStyle","fillText","coins","toString","AssetManager","cache","audio","sprite","spriteSheet","bufferCache","queue","succesCount","errorCount","initAudioContext","AudioContext","webkitAudioContext","context","e","alert","path","opts","arguments","length","undefined","item","loadAudio","loadSprite","loadSpriteSheet","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","done","onerror","send","img","Image","src","_SpriteSheet2","loop","sound","createBufferSource","connect","destination","loopEnd","Math","floor","duration","start","SpriteSheet","sourcePath","_image","_framesPerRow","_frameWidth","_sourcePath","_frameHeight","Error","image","framesPerRow","InputManager","initializeKeyHandler","initializeTouchHandler","observer","event","key","evt","preventDefault","xDown","touches","clientX","yDown","clientY","xUp","yUp","yDiff","handlerInstance","keys","Animation","speed","end","offsetBottom","sequence","currentFrame","counter","frame","y","row","col","Remote","data"],"mappings":"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","file":"game.bundle.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 64584307fde922b6b2a1","'use strict'\r\n\r\nimport GameClient from './application/GameClient'\r\nimport Remote from './application/Remote'\r\n\r\n/**\r\n * modern browser equivalent of jQuery $(document).ready()\r\n */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  let socket = io()\r\n  let remote = new Remote(socket)\r\n  let client = new GameClient(remote, document.getElementById('game'))\r\n  console.log('hi')\r\n  /**\r\n   * Initialize player id on remote connection\r\n   */\r\n  socket.on('connect', () => {\r\n    socket.emit('new player')\r\n    client.playerId = socket.io.engine.id\r\n  })\r\n\r\n  /**\r\n   * Listen to remote sending objects to draw.\r\n   * Contains the drawing loop\r\n   */\r\n  socket.on('state', players => {\r\n    client.render(players)\r\n  })\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app.js","'use strict'\nimport AssetManager from './AssetManager'\nimport InputManager from './InputManager'\nimport Animation from './../graphics/2D/Animation'\n\nexport default class GameClient {\n  constructor (remote, canvas) {\n    this.registerLoop()\n    this.canvas = canvas\n    this.inputManager = new InputManager(canvas)\n    this.inputManager.observers.push(remote)\n    this.assetManager = new AssetManager()\n    this.spritesLoaded = false\n    this.ctx = null\n    this.animations = {}\n    this.init()\n  }\n\n  /**\n   * Shim for animation loop.\n   * Selects one that's available or uses fallback with setTimeout.\n   */\n  registerLoop () {\n    window.requestAnimFrame = (() => {\n      return window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.oRequestAnimationFrame ||\n        window.msRequestAnimationFrame ||\n        function (callback, element) {\n          window.setTimeout(callback, 1000 / 60)\n        }\n    })()\n  }\n\n  init () {\n    console.log('start')\n    // check if canvas is supported by browser\n    if (this.canvas.getContext) {\n      this.ctx = this.canvas.getContext('2d')\n      // Add all sprites and music files to the download queue\n      this.assetManager.queueDownload('ambient', 'assets/audio/ambient/ambient.mp3', 'audio')\n      this.assetManager.queueDownload('jump', 'assets/audio/effects/jump.wav', 'audio')\n      this.assetManager.queueDownload('background', 'assets/textures/background.png', 'texture')\n      this.assetManager.queueDownload('player', 'assets/textures/player.png', 'texture')\n      this.assetManager.queueDownload('stone', 'assets/textures/stone-block.jpg', 'texture')\n      this.assetManager.queueDownload('heart', 'assets/textures/heart.png', 'texture')\n      this.assetManager.queueDownload('coin', 'assets/textures/coin.png', 'texture')\n      this.assetManager.queueDownload('playerSheet', 'assets/textures/test.png', 'spriteSheet', {\n        frameWidth: 32,\n        frameHeight: 64\n      })\n      this.assetManager.queueDownload('coinSheet', 'assets/textures/coin-sprite-animation-sprite-sheet.png', 'spriteSheet', {\n        frameWidth: 44, frameHeight: 44\n      })\n      this.assetManager.loadAll(() => {\n        this.animations.right = new Animation(this.assetManager.getSpriteSheet('playerSheet'), 3, 3, 6, 12)\n        this.animations.left = new Animation(this.assetManager.getSpriteSheet('playerSheet'), 3, 3, 6, 12)\n        this.animations.idle = new Animation(this.assetManager.getSpriteSheet('playerSheet'), 10, 0, 2, 12)\n        this.animations.coin = new Animation(this.assetManager.getSpriteSheet('coinSheet'), 3, 0, 9)\n        this.animations.current = this.animations.left\n        // Play ambient sound\n        this.assetManager.playSound('ambient', true)\n        // Draw Background only once to improve performance\n        document.getElementById('background').getContext('2d').drawImage(this.assetManager.getSprite('background'), 0, 0, this.canvas.width, this.canvas.height)\n        // make sure that all sprites needed for drawing are downloaded\n        this.spritesLoaded = true\n        this.update()\n      })\n    } else {\n      document.getElementById('unsupported').textContent = 'Please update your browser or download another one which supports HTML5'\n    }\n  }\n\n  update () {\n    this.inputManager.notify()\n    // Request new frame when ready. Allows the game to play in a loop in approximately 60fps\n    window.requestAnimationFrame(() => this.update())\n  }\n\n  /**\n   * Draw all objects.\n   * @param players player objects with objects within their viewport\n   */\n  render (players) {\n    let currentPlayer = players.find(player => { return player.id === this.playerId })\n    if (this.playerId && currentPlayer && this.spritesLoaded) {\n      if (this.inputManager.registeredInputs['w'] || this.inputManager.registeredInputs[' ']) {\n        // Check if players is not already jumping\n        if (!currentPlayer.jumping && currentPlayer.grounded) {\n          this.assetManager.playSound('jump')\n        }\n      }\n      this.animations.current.update()\n      this.animations.coin.update()\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n      players.forEach(player => {\n        // Make sure to only draw players in the same area\n        if (player.viewport.areaId === currentPlayer.viewport.areaId) {\n          if (player.registeredInputs['a']) {\n            this.animations.current = this.animations.left\n          }\n          if (player.registeredInputs['d']) {\n            this.animations.current = this.animations.right\n          }\n          if (!player.registeredInputs['d'] && !player.registeredInputs['a']) {\n            this.animations.current = this.animations.idle\n          }\n          this.animations.current.draw(this.ctx, player.position._x, player.position._y, player.width, player.height)\n        }\n      })\n      // Draw all blocks\n      currentPlayer.viewport.blocks.forEach(block => {\n        if (block.type === 'stone') {\n          this.ctx.drawImage(this.assetManager.getSprite(block.type), block.position._x, block.position._y, block.width, block.height)\n        } else if (block.type === 'coin') {\n          this.animations.coin.draw(this.ctx, block.position._x, block.position._y, block.width, block.height)\n        }\n      })\n      // Display health\n      let x = this.canvas.width - 35\n      for (let i = 0; i < currentPlayer.lives; i++) {\n        this.ctx.drawImage(this.assetManager.getSprite('heart'), x, 5, 30, 30)\n        x -= 30\n      }\n      this.ctx.drawImage(this.assetManager.getSprite('coin'), 5, 5, 30, 30)\n      this.ctx.font = '30px sans-serif'\n      this.ctx.fillStyle = '#081966'\n      this.ctx.fillText(currentPlayer.coins.toString(), 35, 30)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/GameClient.js","import SpriteSheet from './../graphics/2D/SpriteSheet'\n\n/**\n * Asset manager.\n *\n * @author Daniel Peters\n * @version 2.0\n */\nexport default class AssetManager {\n  constructor () {\n    this.cache = {\n      audio: [],\n      sprite: [],\n      spriteSheet: []\n    }\n    this.bufferCache = []\n    this.queue = []\n    this.succesCount = 0\n    this.errorCount = 0\n    this.initAudioContext()\n  }\n\n  initAudioContext () {\n    try {\n      // Fix for browsers using prefixes\n      window.AudioContext = window.AudioContext || window.webkitAudioContext\n      this.context = new AudioContext()\n    } catch (e) {\n      alert('Web Audio API is not supported in this browser')\n    }\n  }\n\n  /**\n   * Queue an audio file for download.\n   *\n   * @param {string} name name of the audio file\n   * @param {string} path location of the audio file\n   * @param {string} type of file\n   * @param {{}} opts additional options\n   */\n  queueDownload (name, path, type, opts = {}) {\n    this.queue.push({name: name, path: path, type: type, opts: opts})\n  }\n\n  /**\n   * Download all files and execute callback function when done.\n   *\n   * @param callback function to be executed when downloading is done\n   */\n  loadAll (callback) {\n    if (this.queue.length === 0) {\n      callback()\n    }\n    this.queue.forEach(item => {\n      if (item.type === 'audio') {\n        this.loadAudio(item, callback)\n      } else if (item.type === 'texture') {\n        this.loadSprite(item, callback)\n      } else if (item.type === 'spriteSheet') {\n        this.loadSpriteSheet(item, callback)\n      }\n    })\n  }\n\n  /**\n   * Build an AJAX Request to loadAudio audio file into the buffer cache.\n   *\n   * @param {{}} item object with name of file and path to file\n   * @param callback function to execute on done\n   */\n  loadAudio (item, callback) {\n    let request = new XMLHttpRequest()\n\n    request.open('GET', item.path, true)\n    request.responseType = 'arraybuffer'\n\n    // Decode asynchronously\n    request.onload = () => {\n      this.context.decodeAudioData(\n        request.response, buffer => {\n          this.cache.audio[item.name] = buffer\n          this.succesCount += 1\n          if (this.done()) {\n            callback()\n          }\n        }\n      )\n    }\n\n    // Register error\n    request.onerror = () => {\n      this.errorCount += 1\n      if (this.done()) {\n        callback()\n      }\n    }\n    request.send()\n  }\n\n  /**\n   * Load simple sprites as image.\n   *\n   * @param item sprite info\n   * @param callback called upon downloading all\n   */\n  loadSprite (item, callback) {\n    let img = new Image()\n    img.addEventListener('load', () => {\n      this.succesCount += 1\n\n      if (this.done()) {\n        callback()\n      }\n    }, false)\n    img.addEventListener('error', () => {\n      this.errorCount += 1\n\n      if (this.done()) {\n        callback()\n      }\n    }, false)\n    img.src = item.path\n    this.cache.sprite[item.name] = img\n  }\n\n  /**\n   * Load sprites sheet.\n   *\n   * @param item sprite sheet info\n   * @param callback called upon downloading all\n   */\n  loadSpriteSheet (item, callback) {\n    this.cache.spriteSheet[item.name] = new SpriteSheet(item.path, item.opts.frameWidth || 0, item.opts.frameHeight || 0)\n    this.succesCount += 1\n    if (this.done()) {\n      callback()\n    }\n  }\n\n  /**\n   * Get sprite by name.\n   *\n   * @param {string} name sprite name\n   */\n  getSprite (name) {\n    return this.cache.sprite[name]\n  }\n\n  /**\n   * Get sprite sheet by name.\n   *\n   * @param {string} name sprite sheet name\n   */\n  getSpriteSheet (name) {\n    return this.cache.spriteSheet[name]\n  }\n\n  /**\n   * Create an audio buffer source node from cached buffer.\n   * Send it to the destination of the audio context and play it.\n   *\n   * @param name filename\n   * @param loop set to true for looped sounds like ambient music\n   */\n  playSound (name, loop = false) {\n    let sound = this.context.createBufferSource()\n\n    sound.buffer = this.cache.audio[name]\n    sound.connect(this.context.destination)\n    if (loop) {\n      sound.loop = loop\n      sound.loopEnd = Math.floor(sound.buffer.duration)\n    }\n    sound.start(0)\n  }\n\n  /**\n   * Check if downloading is finished.\n   * @returns {boolean}\n   */\n  done () {\n    return this.queue.length === this.succesCount + this.errorCount\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/AssetManager.js","/**\n * Sprite sheet definition.\n */\nexport default class SpriteSheet {\n  /**\n   * Constructor. Sets frame dimensions and calculates number of frames.\n   * @param sourcePath\n   * @param frameWidth\n   * @param frameHeight\n   */\n  constructor (sourcePath, frameWidth, frameHeight) {\n    this._image = new Image()\n    this._image.addEventListener('load', () => {\n      this._framesPerRow = Math.floor(this._image.width / this._frameWidth)\n    })\n    this._image.src = sourcePath\n    this._sourcePath = sourcePath\n    this._frameWidth = frameWidth\n    this._frameHeight = frameHeight\n  }\n\n  /**\n   *\n   * @returns {string}\n   */\n  get sourcePath () {\n    return this._sourcePath\n  }\n\n  /**\n   *\n   * @param {string} sourcePath\n   */\n  set sourcePath (sourcePath) {\n    if (typeof sourcePath !== 'string') {\n      throw new Error('Param sourcePath must be of type number!')\n    }\n    this._sourcePath = sourcePath\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n  get frameWidth () {\n    return this._frameWidth\n  }\n\n  /**\n   *\n   * @param {number} frameWidth\n   */\n  set frameWidth (frameWidth) {\n    if (typeof frameWidth !== 'number') {\n      throw new Error('Param frameWidth must be of type number!')\n    }\n    this._frameWidth = frameWidth\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n  get frameHeight () {\n    return this._frameHeight\n  }\n\n  /**\n   *\n   * @param {number} frameHeight\n   */\n  set frameHeight (frameHeight) {\n    if (typeof frameHeight !== 'number') {\n      throw new Error('Param frameHeight must be of type number!')\n    }\n    this._frameHeight = frameHeight\n  }\n\n  /**\n   *\n   * @returns {Image}\n   */\n  get image () {\n    return this._image\n  }\n\n  /**\n   *\n   * @param {Image} image\n   */\n  set image (image) {\n    if (!(image instanceof Image)) {\n      throw new Error('Param image must be of type Image!')\n    }\n    this._image = image\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n  get framesPerRow () {\n    return this._framesPerRow\n  }\n\n  /**\n   *\n   * @param {number} framesPerRow\n   */\n  set framesPerRow (framesPerRow) {\n    this._framesPerRow = framesPerRow\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/graphics/2D/SpriteSheet.js","/**\n * Input manager.\n *\n * @author Daniel Peters\n * @version 2.0\n */\nexport default class InputManager {\n  constructor () {\n    this.initializeKeyHandler()\n    this.initializeTouchHandler()\n\n    // All keystrokes and touch swipes are registered here\n    // This object is then sent to the remote to process player movement\n    this.registeredInputs = {}\n    this.observers = []\n  }\n\n  notify () {\n    this.observers.forEach(observer => observer.update(this.registeredInputs))\n  }\n\n  /**\n   * Handle keyboard key presses.\n   * Only booleans are set to express the movement direction intention\n   * This allows the separation of keystrokes from actual movement.\n   */\n  initializeKeyHandler () {\n    window.addEventListener('keydown', event => { this.registeredInputs[event.key] = true }, false)\n    window.addEventListener('keyup', event => { this.registeredInputs[event.key] = false }, false)\n  }\n\n  /**\n   * Maps swipe directions to key press booleans.\n   * Allows touch controls on mobile.\n   */\n  initializeTouchHandler () {\n    // Register the event listeners\n    window.addEventListener('touchstart', handleTouchStart, false)\n    window.addEventListener('touchmove', handleTouchMove, false)\n    window.addEventListener('touchend', handleTouchEnd, false)\n\n    let xDown = null\n    let yDown = null\n    let handlerInstance = this\n\n    function handleTouchStart (evt) {\n      // Prevent divide scrolling\n      evt.preventDefault()\n      xDown = evt.touches[0].clientX\n      yDown = evt.touches[0].clientY\n    }\n\n    function handleTouchMove (evt) {\n      // Prevent divide scrolling\n      evt.preventDefault()\n      // do nothing if no touch direction is registered\n      if (!xDown || !yDown) {\n        return\n      }\n\n      let xUp = evt.touches[0].clientX\n      let yUp = evt.touches[0].clientY\n\n      // Subtract start currently touched location from start location\n      let xDiff = xDown - xUp\n      let yDiff = yDown - yUp\n\n      // Positive values equals left. Negative values equals right\n      if (xDiff > 0) {\n        handlerInstance.registeredInputs['a'] = true\n      } else {\n        handlerInstance.registeredInputs['d'] = true\n      }\n\n      // Positive = up. Negative = down\n      if (yDiff > 0) {\n        handlerInstance.registeredInputs['w'] = true\n      } else {\n        /* down swipe */\n      }\n      /* reset values */\n      xDown = null\n      yDown = null\n    }\n\n    function handleTouchEnd (evt) {\n      // Prevent divide scrolling\n      evt.preventDefault()\n      Object.keys(handlerInstance.registeredInputs).forEach(key => { handlerInstance.registeredInputs[key] = false })\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/InputManager.js","/**\n * Implements sprite animation using sprite sheet.\n *\n * @author Daniel Peters\n * @version 0.3\n */\nexport default class Animation {\n  /**\n   * Constructor Sets all animation data.\n   *\n   * @param {SpriteSheet} spriteSheet corresponding sprite sheet\n   * @param {number} speed animation speed\n   * @param {number} start animation start frame\n   * @param {number} end animation end frame\n   * @param {number} offsetBottom drawing offset at the bottom of source image\n   */\n  constructor (spriteSheet, speed, start, end, offsetBottom = 0) {\n    this.spriteSheet = spriteSheet\n    this.speed = speed\n    this.sequence = []\n    this.currentFrame = 0\n    this.counter = 0\n    this.offsetBottom = offsetBottom\n\n    for (let frame = start; frame <= end; frame++) {\n      this.sequence.push(frame)\n    }\n  }\n\n  /**\n   * Update animation frames.\n   */\n  update () {\n    if (this.counter === (this.speed - 1)) {\n      this.currentFrame = (this.currentFrame + 1) % this.sequence.length\n    }\n    this.counter = (this.counter + 1) % this.speed\n  }\n\n  /**\n   * Draw current frame\n   * @param ctx canvas context\n   * @param x location x\n   * @param y location y\n   * @param width display width\n   * @param height display height\n   */\n  draw (ctx, x, y, width, height) {\n    let row = Math.floor(this.sequence[this.currentFrame] / this.spriteSheet.framesPerRow)\n    let col = Math.floor(this.sequence[this.currentFrame] % this.spriteSheet.framesPerRow)\n    ctx.drawImage(\n      this.spriteSheet.image,\n      col * this.spriteSheet.frameWidth,\n      row * this.spriteSheet.frameHeight,\n      this.spriteSheet.frameWidth,\n      this.spriteSheet.frameHeight - this.offsetBottom,\n      x,\n      y,\n      width,\n      height\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/graphics/2D/Animation.js","export default class Remote {\n  constructor (socket) {\n    this.socket = socket\n  }\n\n  update (data) {\n    this.socket.emit('input', data)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/Remote.js"]}