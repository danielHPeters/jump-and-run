{"version":3,"sources":["webpack:///webpack/bootstrap 22a7a9abafdfd7085ecd","webpack:///./src/client/app.js","webpack:///./src/client/application/AudioManager.js","webpack:///./src/client/application/AssetManager.js","webpack:///./src/client/application/KeyboardEventHandler.js","webpack:///./src/client/model/Vector.js"],"names":["socket","io","connect","canvas","document","getElementById","keyEventHandler","audioManager","assetManager","playerId","ctx","spritesLoaded","animate","emit","keyActionsRegister","window","requestAnimationFrame","on","players","clearRect","width","height","Object","keys","forEach","player","key","viewport","areaId","drawImage","getAsset","material","name","position","x","y","blocks","block","pos","i","lives","cache","init","getContext","queueDownload","loadAll","playSound","downLoadAll","textContent","engine","id","addEventListener","requestAnimFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","AudioManager","bufferCache","downloadQueue","succesCount","errorCount","AudioContext","webkitAudioContext","context","e","alert","path","push","length","managerInstance","load","item","url","instance","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","done","onerror","send","loop","sound","createBufferSource","destination","loopEnd","Math","floor","duration","start","AssetManager","img","Image","src","KeyboardEventHandler","initializeKeyHandler","event","Vector","vector","scalar","sqrt","magnitude","mag","div","max","normalize","mult","to","pow","v1","v2"],"mappings":"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","file":"./public/js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 22a7a9abafdfd7085ecd","'use strict'\r\n\r\nimport AudioManager from './application/AudioManager'\r\nimport AssetManager from './application/AssetManager'\r\nimport KeyboardEventHandler from './application/KeyboardEventHandler'\r\nimport Vector from './model/Vector'\r\n\r\nlet socket = io.connect()\r\nlet canvas = document.getElementById('game')\r\nlet keyEventHandler = new KeyboardEventHandler(canvas)\r\nlet audioManager = new AudioManager()\r\nlet assetManager = new AssetManager()\r\nlet playerId\r\nlet ctx\r\nlet spritesLoaded = false\r\n\r\nfunction animate () {\r\n  socket.emit('movement', keyEventHandler.keyActionsRegister)\r\n  // Request new frame when ready. Allows the game to play in a loop\r\n  window.requestAnimationFrame(() => animate())\r\n}\r\n\r\nsocket.on('state', players => {\r\n  if (playerId && players[playerId] && spritesLoaded) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    Object.keys(players).forEach(key => {\r\n      const player = players[key]\r\n      if (player.viewport.areaId === players[playerId].viewport.areaId) {\r\n        ctx.drawImage(assetManager.getAsset(player.material.name), player.position.x, player.position.y, player.width, player.height)\r\n      }\r\n    })\r\n    players[playerId].viewport.blocks.forEach(block => {\r\n      ctx.drawImage(assetManager.getAsset(block.material.name), block.position.x, block.position.y, block.width, block.height)\r\n    })\r\n    let pos = new Vector(canvas.width - 35, 5)\r\n    for (let i = 0; i < players[playerId].lives; i++) {\r\n      ctx.drawImage(assetManager.cache['heart'], pos.x, pos.y, 30, 30)\r\n      pos.x -= 30\r\n    }\r\n  }\r\n})\r\n\r\n/**\r\n * Initializes all game Objects\r\n */\r\nfunction init () {\r\n  if (canvas.getContext) {\r\n    socket.emit('new player')\r\n    ctx = canvas.getContext('2d')\r\n    audioManager.queueDownload('ambient', 'assets/audio/ambient/ambient.mp3')\r\n    audioManager.queueDownload('jump', 'assets/audio/effects/jump.wav')\r\n    audioManager.loadAll(() => {\r\n      audioManager.playSound('ambient', true)\r\n\r\n      // Add all sprites to the download queue\r\n      assetManager.queueDownload('background', 'assets/textures/background.png')\r\n      assetManager.queueDownload('player', 'assets/textures/player.png')\r\n      assetManager.queueDownload('stone-block', 'assets/textures/stone-block.jpg')\r\n      assetManager.queueDownload('heart', 'assets/textures/heart.png')\r\n      // Start playing ambient music\r\n\r\n      // Download all sprites\r\n      assetManager.downLoadAll(() => {\r\n        animate()\r\n        document.getElementById('background').getContext('2d').drawImage(assetManager.getAsset('background'), 0, 0, canvas.width, canvas.height)\r\n        spritesLoaded = true\r\n      })\r\n    })\r\n  } else {\r\n    document.getElementById('unsupported').textContent = 'Please update your browser or download another one which supports HTML5'\r\n  }\r\n}\r\n\r\nsocket.on('connect', function () {\r\n  socket.emit('new player')\r\n  playerId = socket.io.engine.id\r\n})\r\n\r\ndocument.addEventListener('DOMContentLoaded', init())\r\n\r\n/**\r\n *\r\n */\r\nwindow.requestAnimFrame = (function () {\r\n  return window.requestAnimationFrame ||\r\n    window.webkitRequestAnimationFrame ||\r\n    window.mozRequestAnimationFrame ||\r\n    window.oRequestAnimationFrame ||\r\n    window.msRequestAnimationFrame ||\r\n    function (/* function */ callback, /* DOMElement */ element) {\r\n      window.setTimeout(callback, 1000 / 60)\r\n    }\r\n})()\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app.js","export default class AudioManager {\n  constructor () {\n    this.bufferCache = []\n    this.downloadQueue = []\n    this.succesCount = 0\n    this.errorCount = 0\n\n    try {\n      // Fix up for prefixing\n      window.AudioContext = window.AudioContext || window.webkitAudioContext\n      this.context = new AudioContext()\n    } catch (e) {\n      alert('Web Audio API is not supported in this browser')\n    }\n  }\n\n  /**\n   *\n   * @param {string} name\n   * @param {string} path\n   */\n  queueDownload (name, path) {\n    this.downloadQueue.push({name: name, path: path})\n  }\n\n  loadAll (callback) {\n    if (this.downloadQueue.length === 0) {\n      callback()\n    }\n    let managerInstance = this\n    this.downloadQueue.forEach(item => {\n      managerInstance.load(item.name, item.path, callback)\n    })\n  }\n\n  load (name, url, callback) {\n    let instance = this\n    let request = new XMLHttpRequest()\n\n    request.open('GET', url, true)\n    request.responseType = 'arraybuffer'\n\n    // Decode asynchronously\n    request.onload = function () {\n      instance.context.decodeAudioData(\n        request.response, buffer => {\n          instance.bufferCache[name] = buffer\n          instance.succesCount += 1\n\n          if (instance.done()) {\n            callback()\n          }\n        }\n      )\n    }\n\n    request.onerror = function () {\n      instance.errorCount += 1\n\n      if (instance.done()) {\n        callback()\n      }\n    }\n    request.send()\n  }\n\n  playSound (name, loop = false) {\n    let sound = this.context.createBufferSource()\n\n    sound.buffer = this.bufferCache[name]\n    sound.connect(this.context.destination)\n    if (loop) {\n      sound.loop = loop\n      sound.loopEnd = Math.floor(sound.buffer.duration)\n    }\n    sound.start(0)\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  done () {\n    return this.downloadQueue.length === this.succesCount + this.errorCount\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/AudioManager.js","export default class AssetManager {\n  constructor () {\n    this.downloadQueue = []\n    this.cache = {}\n    this.succesCount = 0\n    this.errorCount = 0\n  }\n\n  /**\n   *\n   * @param {string} name\n   * @param {string} path\n   */\n  queueDownload (name, path) {\n    this.downloadQueue.push({name: name, path: path})\n  }\n\n  /**\n   *\n   * @param callback\n   */\n  downLoadAll (callback) {\n    if (this.downloadQueue.length === 0) {\n      callback()\n    }\n\n    let managerInstance = this\n    this.downloadQueue.forEach(item => {\n      let img = new Image()\n      img.addEventListener('load', () => {\n        managerInstance.succesCount += 1\n\n        if (managerInstance.done()) {\n          callback()\n        }\n      }, false)\n      img.addEventListener('error', function () {\n        managerInstance.errorCount += 1\n\n        if (managerInstance.done()) {\n          callback()\n        }\n      }, false)\n      img.src = item.path\n      this.cache[item.name] = img\n    })\n  }\n\n  /**\n   *\n   * @param {string} name\n   */\n  getAsset (name) {\n    return this.cache[name]\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  done () {\n    return this.downloadQueue.length === this.succesCount + this.errorCount\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/AssetManager.js","/**\n * Created by Daniel on 2017-09-18.\n */\nexport default class KeyboardEventHandler {\n  constructor () {\n    this.initializeKeyHandler()\n    this.keyActionsRegister = {}\n  }\n\n  initializeKeyHandler () {\n    window.addEventListener('keydown', event => { this.keyActionsRegister[event.key] = true })\n    window.addEventListener('keyup', event => { this.keyActionsRegister[event.key] = false })\n  }\n\n  getKeyActionsRegister () {\n    return this.keyActionsRegister\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/KeyboardEventHandler.js","/**\n * @author Daniel Peters\n * @version 1.0\n */\nexport default class Vector {\n  /**\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  constructor (x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  set (x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  setVector (vector) {\n    this.x = vector.x\n    this.y = vector.y\n  }\n\n  add (vector) {\n    this.x += vector.x\n    this.y += vector.y\n  }\n\n  static add (v1, v2) {\n    return new Vector(v1.x + v2.x, v1.y + v2.y)\n  }\n\n  sub (vector) {\n    this.x -= vector.x\n    this.y -= vector.y\n  }\n\n  static sub (v1, v2) {\n    return new Vector(v1.x - v2.x, v1.y - v2.y)\n  }\n\n  mult (scalar) {\n    this.x *= scalar\n    this.y *= scalar\n  }\n\n  static mult (vector, scalar) {\n    return new Vector(vector.x * scalar, vector.y * scalar)\n  }\n\n  div (scalar) {\n    this.x /= scalar\n    this.y /= scalar\n  }\n\n  static div (vector, scalar) {\n    return new Vector(vector.x / scalar, vector.y / scalar)\n  }\n\n  mag () {\n    return Math.sqrt(this.x * this.x + this.y * this.y)\n  }\n\n  negative () {\n    return new Vector(-this.x, -this.y)\n  }\n\n  normalize () {\n    let magnitude = this.mag()\n    if (magnitude !== 0) {\n      this.div(magnitude)\n    }\n  }\n\n  limit (max) {\n    if (this.mag() > max) {\n      this.normalize()\n      this.mult(max)\n    }\n  }\n\n  heading () {\n\n  }\n\n  rotate () {\n\n  }\n\n  lerp () {\n\n  }\n\n  distanceTo (to) {\n    return Math.sqrt(Math.pow(to.x - this.x, 2) + Math.pow(to.y - this.y, 2))\n  }\n\n  angleBetween () {\n\n  }\n\n  dot () {\n\n  }\n\n  cross () {\n\n  }\n\n  random2D () {\n\n  }\n\n  random3D () {\n\n  }\n\n  clone () {\n    return new Vector(this.x, this.y)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/model/Vector.js"],"sourceRoot":""}