{"version":3,"sources":["webpack:///webpack/bootstrap 32bf6825a95a36ab7d47","webpack:///./src/client/app.js","webpack:///./src/client/application/GameClient.js","webpack:///./src/client/application/AssetManager.js","webpack:///./src/client/graphics/2D/SpriteSheet.js","webpack:///./src/client/application/InputManager.js","webpack:///./src/client/graphics/2D/Animation.js","webpack:///./src/client/application/Remote.js"],"names":["document","addEventListener","socket","io","remote","client","getElementById","console","log","on","emit","playerId","engine","id","render","players","GameClient","canvas","registerLoop","inputManager","observers","push","assetManager","spritesLoaded","ctx","animations","init","window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","getContext","queueDownload","frameWidth","frameHeight","loadAll","right","getSpriteSheet","left","idle","coin","current","playSound","drawImage","getSprite","width","height","update","textContent","notify","currentPlayer","find","player","registeredInputs","jumping","grounded","clearRect","forEach","viewport","areaId","draw","position","_x","_y","blocks","block","type","x","i","lives","font","fillStyle","fillText","coins","toString","AssetManager","cache","audio","sprite","spriteSheet","bufferCache","queue","succesCount","errorCount","initAudioContext","AudioContext","webkitAudioContext","context","e","alert","name","path","opts","length","item","loadAudio","loadSprite","loadSpriteSheet","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","done","onerror","send","img","Image","src","loop","sound","createBufferSource","connect","destination","loopEnd","Math","floor","duration","start","SpriteSheet","sourcePath","_image","_framesPerRow","_frameWidth","_sourcePath","_frameHeight","Error","image","framesPerRow","InputManager","initializeKeyHandler","initializeTouchHandler","observer","event","key","handleTouchStart","handleTouchMove","handleTouchEnd","xDown","yDown","handlerInstance","evt","preventDefault","touches","clientX","clientY","xUp","yUp","xDiff","yDiff","Object","keys","Animation","speed","end","offsetBottom","sequence","currentFrame","counter","frame","y","row","col","Remote","data"],"mappings":"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","file":"game.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 32bf6825a95a36ab7d47","'use strict'\r\n\r\nimport GameClient from './application/GameClient'\r\nimport Remote from './application/Remote'\r\n\r\n/**\r\n * modern browser equivalent of jQuery $(document).ready()\r\n */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  let socket = io()\r\n  let remote = new Remote(socket)\r\n  let client = new GameClient(remote, document.getElementById('game'))\r\n  console.log('hi')\r\n  /**\r\n   * Initialize player id on remote connection\r\n   */\r\n  socket.on('connect', () => {\r\n    socket.emit('new player')\r\n    client.playerId = socket.io.engine.id\r\n  })\r\n\r\n  /**\r\n   * Listen to remote sending objects to draw.\r\n   * Contains the drawing loop\r\n   */\r\n  socket.on('state', players => {\r\n    client.render(players)\r\n  })\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app.js","'use strict'\nimport AssetManager from './AssetManager'\nimport InputManager from './InputManager'\nimport Animation from './../graphics/2D/Animation'\n\nexport default class GameClient {\n  constructor (remote, canvas) {\n    this.registerLoop()\n    this.canvas = canvas\n    this.inputManager = new InputManager(canvas)\n    this.inputManager.observers.push(remote)\n    this.assetManager = new AssetManager()\n    this.spritesLoaded = false\n    this.ctx = null\n    this.animations = {}\n    this.init()\n  }\n\n  /**\n   * Shim for animation loop.\n   * Selects one that's available or uses fallback with setTimeout.\n   */\n  registerLoop () {\n    window.requestAnimFrame = (() => {\n      return window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.oRequestAnimationFrame ||\n        window.msRequestAnimationFrame ||\n        function (callback, element) {\n          window.setTimeout(callback, 1000 / 60)\n        }\n    })()\n  }\n\n  init () {\n    console.log('start')\n    // check if canvas is supported by browser\n    if (this.canvas.getContext) {\n      this.ctx = this.canvas.getContext('2d')\n      // Add all sprites and music files to the download queue\n      this.assetManager.queueDownload('ambient', 'assets/audio/ambient/ambient.mp3', 'audio')\n      this.assetManager.queueDownload('jump', 'assets/audio/effects/jump.wav', 'audio')\n      this.assetManager.queueDownload('background', 'assets/textures/background.png', 'texture')\n      this.assetManager.queueDownload('player', 'assets/textures/player.png', 'texture')\n      this.assetManager.queueDownload('stone', 'assets/textures/stone-block.jpg', 'texture')\n      this.assetManager.queueDownload('heart', 'assets/textures/heart.png', 'texture')\n      this.assetManager.queueDownload('coin', 'assets/textures/coin.png', 'texture')\n      this.assetManager.queueDownload('playerSheet', 'assets/textures/test.png', 'spriteSheet', {\n        frameWidth: 32,\n        frameHeight: 64\n      })\n      this.assetManager.queueDownload('coinSheet', 'assets/textures/coin-sprite-animation-sprite-sheet.png', 'spriteSheet', {\n        frameWidth: 44, frameHeight: 44\n      })\n      this.assetManager.loadAll(() => {\n        this.animations.right = new Animation(this.assetManager.getSpriteSheet('playerSheet'), 3, 3, 6, 12)\n        this.animations.left = new Animation(this.assetManager.getSpriteSheet('playerSheet'), 3, 3, 6, 12)\n        this.animations.idle = new Animation(this.assetManager.getSpriteSheet('playerSheet'), 10, 0, 2, 12)\n        this.animations.coin = new Animation(this.assetManager.getSpriteSheet('coinSheet'), 3, 0, 9)\n        this.animations.current = this.animations.left\n        // Play ambient sound\n        this.assetManager.playSound('ambient', true)\n        // Draw Background only once to improve performance\n        document.getElementById('background').getContext('2d').drawImage(this.assetManager.getSprite('background'), 0, 0, this.canvas.width, this.canvas.height)\n        // make sure that all sprites needed for drawing are downloaded\n        this.spritesLoaded = true\n        this.update()\n      })\n    } else {\n      document.getElementById('unsupported').textContent = 'Please update your browser or download another one which supports HTML5'\n    }\n  }\n\n  update () {\n    this.inputManager.notify()\n    // Request new frame when ready. Allows the game to play in a loop in approximately 60fps\n    window.requestAnimationFrame(() => this.update())\n  }\n\n  /**\n   * Draw all objects.\n   * @param players player objects with objects within their viewport\n   */\n  render (players) {\n    let currentPlayer = players.find(player => { return player.id === this.playerId })\n    if (this.playerId && currentPlayer && this.spritesLoaded) {\n      if (this.inputManager.registeredInputs['w'] || this.inputManager.registeredInputs[' ']) {\n        // Check if players is not already jumping\n        if (!currentPlayer.jumping && currentPlayer.grounded) {\n          this.assetManager.playSound('jump')\n        }\n      }\n      this.animations.current.update()\n      this.animations.coin.update()\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n      players.forEach(player => {\n        // Make sure to only draw players in the same area\n        if (player.viewport.areaId === currentPlayer.viewport.areaId) {\n          if (player.registeredInputs['a']) {\n            this.animations.current = this.animations.left\n          }\n          if (player.registeredInputs['d']) {\n            this.animations.current = this.animations.right\n          }\n          if (!player.registeredInputs['d'] && !player.registeredInputs['a']) {\n            this.animations.current = this.animations.idle\n          }\n          this.animations.current.draw(this.ctx, player.position._x, player.position._y, player.width, player.height)\n        }\n      })\n      // Draw all blocks\n      currentPlayer.viewport.blocks.forEach(block => {\n        if (block.type === 'stone') {\n          this.ctx.drawImage(this.assetManager.getSprite(block.type), block.position._x, block.position._y, block.width, block.height)\n        } else if (block.type === 'coin') {\n          this.animations.coin.draw(this.ctx, block.position._x, block.position._y, block.width, block.height)\n        }\n      })\n      // Display health\n      let x = this.canvas.width - 35\n      for (let i = 0; i < currentPlayer.lives; i++) {\n        this.ctx.drawImage(this.assetManager.getSprite('heart'), x, 5, 30, 30)\n        x -= 30\n      }\n      this.ctx.drawImage(this.assetManager.getSprite('coin'), 5, 5, 30, 30)\n      this.ctx.font = '30px sans-serif'\n      this.ctx.fillStyle = '#081966'\n      this.ctx.fillText(currentPlayer.coins.toString(), 35, 30)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/GameClient.js","import SpriteSheet from './../graphics/2D/SpriteSheet'\n\n/**\n * Asset manager.\n *\n * @author Daniel Peters\n * @version 2.0\n */\nexport default class AssetManager {\n  constructor () {\n    this.cache = {\n      audio: [],\n      sprite: [],\n      spriteSheet: []\n    }\n    this.bufferCache = []\n    this.queue = []\n    this.succesCount = 0\n    this.errorCount = 0\n    this.initAudioContext()\n  }\n\n  initAudioContext () {\n    try {\n      // Fix for browsers using prefixes\n      window.AudioContext = window.AudioContext || window.webkitAudioContext\n      this.context = new AudioContext()\n    } catch (e) {\n      alert('Web Audio API is not supported in this browser')\n    }\n  }\n\n  /**\n   * Queue an audio file for download.\n   *\n   * @param {string} name name of the audio file\n   * @param {string} path location of the audio file\n   * @param {string} type of file\n   * @param {{}} opts additional options\n   */\n  queueDownload (name, path, type, opts = {}) {\n    this.queue.push({name: name, path: path, type: type, opts: opts})\n  }\n\n  /**\n   * Download all files and execute callback function when done.\n   *\n   * @param callback function to be executed when downloading is done\n   */\n  loadAll (callback) {\n    if (this.queue.length === 0) {\n      callback()\n    }\n    this.queue.forEach(item => {\n      if (item.type === 'audio') {\n        this.loadAudio(item, callback)\n      } else if (item.type === 'texture') {\n        this.loadSprite(item, callback)\n      } else if (item.type === 'spriteSheet') {\n        this.loadSpriteSheet(item, callback)\n      }\n    })\n  }\n\n  /**\n   * Build an AJAX Request to loadAudio audio file into the buffer cache.\n   *\n   * @param {{}} item object with name of file and path to file\n   * @param callback function to execute on done\n   */\n  loadAudio (item, callback) {\n    let request = new XMLHttpRequest()\n\n    request.open('GET', item.path, true)\n    request.responseType = 'arraybuffer'\n\n    // Decode asynchronously\n    request.onload = () => {\n      this.context.decodeAudioData(\n        request.response, buffer => {\n          this.cache.audio[item.name] = buffer\n          this.succesCount += 1\n          if (this.done()) {\n            callback()\n          }\n        }\n      )\n    }\n\n    // Register error\n    request.onerror = () => {\n      this.errorCount += 1\n      if (this.done()) {\n        callback()\n      }\n    }\n    request.send()\n  }\n\n  /**\n   * Load simple sprites as image.\n   *\n   * @param item sprite info\n   * @param callback called upon downloading all\n   */\n  loadSprite (item, callback) {\n    let img = new Image()\n    img.addEventListener('load', () => {\n      this.succesCount += 1\n\n      if (this.done()) {\n        callback()\n      }\n    }, false)\n    img.addEventListener('error', () => {\n      this.errorCount += 1\n\n      if (this.done()) {\n        callback()\n      }\n    }, false)\n    img.src = item.path\n    this.cache.sprite[item.name] = img\n  }\n\n  /**\n   * Load sprites sheet.\n   *\n   * @param item sprite sheet info\n   * @param callback called upon downloading all\n   */\n  loadSpriteSheet (item, callback) {\n    this.cache.spriteSheet[item.name] = new SpriteSheet(item.path, item.opts.frameWidth || 0, item.opts.frameHeight || 0)\n    this.succesCount += 1\n    if (this.done()) {\n      callback()\n    }\n  }\n\n  /**\n   * Get sprite by name.\n   *\n   * @param {string} name sprite name\n   */\n  getSprite (name) {\n    return this.cache.sprite[name]\n  }\n\n  /**\n   * Get sprite sheet by name.\n   *\n   * @param {string} name sprite sheet name\n   */\n  getSpriteSheet (name) {\n    return this.cache.spriteSheet[name]\n  }\n\n  /**\n   * Create an audio buffer source node from cached buffer.\n   * Send it to the destination of the audio context and play it.\n   *\n   * @param name filename\n   * @param loop set to true for looped sounds like ambient music\n   */\n  playSound (name, loop = false) {\n    let sound = this.context.createBufferSource()\n\n    sound.buffer = this.cache.audio[name]\n    sound.connect(this.context.destination)\n    if (loop) {\n      sound.loop = loop\n      sound.loopEnd = Math.floor(sound.buffer.duration)\n    }\n    sound.start(0)\n  }\n\n  /**\n   * Check if downloading is finished.\n   * @returns {boolean}\n   */\n  done () {\n    return this.queue.length === this.succesCount + this.errorCount\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/AssetManager.js","/**\n * Sprite sheet definition.\n */\nexport default class SpriteSheet {\n  /**\n   * Constructor. Sets frame dimensions and calculates number of frames.\n   * @param sourcePath\n   * @param frameWidth\n   * @param frameHeight\n   */\n  constructor (sourcePath, frameWidth, frameHeight) {\n    this._image = new Image()\n    this._image.addEventListener('load', () => {\n      this._framesPerRow = Math.floor(this._image.width / this._frameWidth)\n    })\n    this._image.src = sourcePath\n    this._sourcePath = sourcePath\n    this._frameWidth = frameWidth\n    this._frameHeight = frameHeight\n  }\n\n  /**\n   *\n   * @returns {string}\n   */\n  get sourcePath () {\n    return this._sourcePath\n  }\n\n  /**\n   *\n   * @param {string} sourcePath\n   */\n  set sourcePath (sourcePath) {\n    if (typeof sourcePath !== 'string') {\n      throw new Error('Param sourcePath must be of type number!')\n    }\n    this._sourcePath = sourcePath\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n  get frameWidth () {\n    return this._frameWidth\n  }\n\n  /**\n   *\n   * @param {number} frameWidth\n   */\n  set frameWidth (frameWidth) {\n    if (typeof frameWidth !== 'number') {\n      throw new Error('Param frameWidth must be of type number!')\n    }\n    this._frameWidth = frameWidth\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n  get frameHeight () {\n    return this._frameHeight\n  }\n\n  /**\n   *\n   * @param {number} frameHeight\n   */\n  set frameHeight (frameHeight) {\n    if (typeof frameHeight !== 'number') {\n      throw new Error('Param frameHeight must be of type number!')\n    }\n    this._frameHeight = frameHeight\n  }\n\n  /**\n   *\n   * @returns {Image}\n   */\n  get image () {\n    return this._image\n  }\n\n  /**\n   *\n   * @param {Image} image\n   */\n  set image (image) {\n    if (!(image instanceof Image)) {\n      throw new Error('Param image must be of type Image!')\n    }\n    this._image = image\n  }\n\n  /**\n   *\n   * @returns {number}\n   */\n  get framesPerRow () {\n    return this._framesPerRow\n  }\n\n  /**\n   *\n   * @param {number} framesPerRow\n   */\n  set framesPerRow (framesPerRow) {\n    this._framesPerRow = framesPerRow\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/graphics/2D/SpriteSheet.js","/**\n * Input manager.\n *\n * @author Daniel Peters\n * @version 2.0\n */\nexport default class InputManager {\n  constructor () {\n    this.initializeKeyHandler()\n    this.initializeTouchHandler()\n\n    // All keystrokes and touch swipes are registered here\n    // This object is then sent to the remote to process player movement\n    this.registeredInputs = {}\n    this.observers = []\n  }\n\n  notify () {\n    this.observers.forEach(observer => observer.update(this.registeredInputs))\n  }\n\n  /**\n   * Handle keyboard key presses.\n   * Only booleans are set to express the movement direction intention\n   * This allows the separation of keystrokes from actual movement.\n   */\n  initializeKeyHandler () {\n    window.addEventListener('keydown', event => { this.registeredInputs[event.key] = true }, false)\n    window.addEventListener('keyup', event => { this.registeredInputs[event.key] = false }, false)\n  }\n\n  /**\n   * Maps swipe directions to key press booleans.\n   * Allows touch controls on mobile.\n   */\n  initializeTouchHandler () {\n    // Register the event listeners\n    window.addEventListener('touchstart', handleTouchStart, false)\n    window.addEventListener('touchmove', handleTouchMove, false)\n    window.addEventListener('touchend', handleTouchEnd, false)\n\n    let xDown = null\n    let yDown = null\n    let handlerInstance = this\n\n    function handleTouchStart (evt) {\n      // Prevent divide scrolling\n      evt.preventDefault()\n      xDown = evt.touches[0].clientX\n      yDown = evt.touches[0].clientY\n    }\n\n    function handleTouchMove (evt) {\n      // Prevent divide scrolling\n      evt.preventDefault()\n      // do nothing if no touch direction is registered\n      if (!xDown || !yDown) {\n        return\n      }\n\n      let xUp = evt.touches[0].clientX\n      let yUp = evt.touches[0].clientY\n\n      // Subtract start currently touched location from start location\n      let xDiff = xDown - xUp\n      let yDiff = yDown - yUp\n\n      // Positive values equals left. Negative values equals right\n      if (xDiff > 0) {\n        handlerInstance.registeredInputs['a'] = true\n      } else {\n        handlerInstance.registeredInputs['d'] = true\n      }\n\n      // Positive = up. Negative = down\n      if (yDiff > 0) {\n        handlerInstance.registeredInputs['w'] = true\n      } else {\n        /* down swipe */\n      }\n      /* reset values */\n      xDown = null\n      yDown = null\n    }\n\n    function handleTouchEnd (evt) {\n      // Prevent divide scrolling\n      evt.preventDefault()\n      Object.keys(handlerInstance.registeredInputs).forEach(key => { handlerInstance.registeredInputs[key] = false })\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/InputManager.js","/**\n * Implements sprite animation using sprite sheet.\n *\n * @author Daniel Peters\n * @version 0.3\n */\nexport default class Animation {\n  /**\n   * Constructor Sets all animation data.\n   *\n   * @param {SpriteSheet} spriteSheet corresponding sprite sheet\n   * @param {number} speed animation speed\n   * @param {number} start animation start frame\n   * @param {number} end animation end frame\n   * @param {number} offsetBottom drawing offset at the bottom of source image\n   */\n  constructor (spriteSheet, speed, start, end, offsetBottom = 0) {\n    this.spriteSheet = spriteSheet\n    this.speed = speed\n    this.sequence = []\n    this.currentFrame = 0\n    this.counter = 0\n    this.offsetBottom = offsetBottom\n\n    for (let frame = start; frame <= end; frame++) {\n      this.sequence.push(frame)\n    }\n  }\n\n  /**\n   * Update animation frames.\n   */\n  update () {\n    if (this.counter === (this.speed - 1)) {\n      this.currentFrame = (this.currentFrame + 1) % this.sequence.length\n    }\n    this.counter = (this.counter + 1) % this.speed\n  }\n\n  /**\n   * Draw current frame\n   * @param ctx canvas context\n   * @param x location x\n   * @param y location y\n   * @param width display width\n   * @param height display height\n   */\n  draw (ctx, x, y, width, height) {\n    let row = Math.floor(this.sequence[this.currentFrame] / this.spriteSheet.framesPerRow)\n    let col = Math.floor(this.sequence[this.currentFrame] % this.spriteSheet.framesPerRow)\n    ctx.drawImage(\n      this.spriteSheet.image,\n      col * this.spriteSheet.frameWidth,\n      row * this.spriteSheet.frameHeight,\n      this.spriteSheet.frameWidth,\n      this.spriteSheet.frameHeight - this.offsetBottom,\n      x,\n      y,\n      width,\n      height\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/graphics/2D/Animation.js","export default class Remote {\n  constructor (socket) {\n    this.socket = socket\n  }\n\n  update (data) {\n    this.socket.emit('input', data)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/application/Remote.js"],"sourceRoot":""}